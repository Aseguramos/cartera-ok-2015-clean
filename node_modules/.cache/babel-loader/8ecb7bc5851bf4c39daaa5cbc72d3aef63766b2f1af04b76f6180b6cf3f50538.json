{"ast":null,"code":"import _objectSpread from\"C:/Users/HUAWEI/carpeta limpia para cargar/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import*as XLSX from\"xlsx\";import{collection,getDocs,doc,writeBatch,setDoc}from\"firebase/firestore\";import{db}from\"./firebase\";/**\r\n * SubirPolizas.jsx\r\n * - Importa Excel y sube a Firestore (colección: \"polizas\")\r\n * - Clave única por póliza: aseguradora + poliza\r\n * - Conserva: gestion, renovacion, comision, telefono (si ya existían en Firestore)\r\n * - Mapea encabezados comunes (mayúsculas / tildes / variantes)\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SubirPolizas(_ref){let{onDone}=_ref;const[cargando,setCargando]=useState(false);const[mensaje,setMensaje]=useState(\"\");// =========================\n// Helpers normalización\n// =========================\nconst norm=v=>String(v!==null&&v!==void 0?v:\"\").toLowerCase().normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g,\"\").trim();const toSI=v=>{if(typeof v===\"boolean\")return v?\"SI\":\"NO\";const s=norm(v).toUpperCase();if(s===\"SI\"||s===\"SÍ\"||s===\"TRUE\"||s===\"1\")return\"SI\";if(s===\"NO\"||s===\"FALSE\"||s===\"0\")return\"NO\";return\"NO\";};const parseNumber=v=>{if(v===null||v===undefined||v===\"\")return 0;if(typeof v===\"number\")return isFinite(v)?v:0;const s=String(v).replace(/\\./g,\"\").replace(\",\",\".\").trim();const n=parseFloat(s);return isFinite(n)?n:0;};// =========================\n// Fechas\n// =========================\nconst pad2=n=>String(n).padStart(2,\"0\");const toDateSafe=value=>{if(value===null||value===undefined||value===\"\")return null;// Excel serial\nif(typeof value===\"number\"&&isFinite(value)){const excelEpoch=new Date(Date.UTC(1899,11,30));const d=new Date(excelEpoch.getTime()+value*86400000);return isNaN(d.getTime())?null:d;}// Date\nif(value instanceof Date){return isNaN(value.getTime())?null:value;}// String\nif(typeof value===\"string\"){const s=value.trim();if(!s)return null;// YYYY-MM-DD\nif(/^\\d{4}-\\d{2}-\\d{2}$/.test(s)){const d=new Date(s+\"T00:00:00\");return isNaN(d.getTime())?null:d;}// YYYY/MM/DD\nif(/^\\d{4}\\/\\d{2}\\/\\d{2}$/.test(s)){const parts=s.split(\"/\");const y=parseInt(parts[0],10);const m=parseInt(parts[1],10);const da=parseInt(parts[2],10);const dt=new Date(y,m-1,da);return isNaN(dt.getTime())?null:dt;}// DD/MM/YYYY\nif(/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(s)){const parts=s.split(\"/\");const da=parseInt(parts[0],10);const m=parseInt(parts[1],10);const y=parseInt(parts[2],10);const dt=new Date(y,m-1,da);return isNaN(dt.getTime())?null:dt;}// fallback\nconst dt=new Date(s);return isNaN(dt.getTime())?null:dt;}return null;};const formatYMD=value=>{const d=toDateSafe(value);if(!d)return\"\";const y=String(d.getFullYear());const m=pad2(d.getMonth()+1);const da=pad2(d.getDate());return y+\"-\"+m+\"-\"+da;};// =========================\n// Encabezados (map)\n// =========================\nconst pick=(row,keys)=>{for(let i=0;i<keys.length;i++){const k=keys[i];if(row[k]!==undefined&&row[k]!==null&&String(row[k]).trim()!==\"\"){return row[k];}}return\"\";};// crea un id estable, sin espacios raros\nconst makeId=(aseguradora,poliza)=>{const a=norm(aseguradora).replace(/\\s+/g,\"_\");const p=norm(poliza).replace(/\\s+/g,\"_\");return(a+\"\"+p).replace(/[^a-z0-9_]+/g,\"_\");};// =========================\n// Importación principal\n// =========================\nconst handleFile=async e=>{const file=e.target.files&&e.target.files[0];if(!file)return;setCargando(true);setMensaje(\"Leyendo Excel...\");try{// 1) Leer Excel\nconst buffer=await file.arrayBuffer();const wb=XLSX.read(buffer,{type:\"array\"});const sheet=wb.Sheets[wb.SheetNames[0]];const rows=XLSX.utils.sheet_to_json(sheet,{defval:\"\"});if(!rows||rows.length===0){setMensaje(\"El Excel está vacío.\");setCargando(false);return;}// 2) Cargar existentes para conservar gestion/renovacion/comision/telefono\nsetMensaje(\"Leyendo pólizas existentes en Firestore...\");const snap=await getDocs(collection(db,\"polizas\"));const existentes={};snap.docs.forEach(d=>{const data=d.data()||{};const a=data.aseguradora||\"\";const p=data.poliza||\"\";const key=makeId(a,p);existentes[key]=_objectSpread({id:d.id},data);});// 3) Preparar batch\nsetMensaje(\"Preparando cargue...\");const batch=writeBatch(db);let totalLeidas=rows.length;let totalValidas=0;let totalNuevas=0;let totalActualizadas=0;for(let i=0;i<rows.length;i++){const r=rows[i];// Encabezados comunes (pueden venir en mayúsculas)\nconst aseguradora=pick(r,[\"ASEGURADORA\",\"Aseguradora\",\"aseguradora\"]);const poliza=pick(r,[\"POLIZA\",\"PÓLIZA\",\"Poliza\",\"Póliza\",\"poliza\"]);if(!aseguradora||!poliza)continue;totalValidas++;const idDoc=makeId(aseguradora,poliza);const prev=existentes[idDoc]||null;// Campos requeridos por ti\nconst data={aseguradora:String(aseguradora).trim(),poliza:String(poliza).trim(),ramo:String(pick(r,[\"RAMO\",\"Ramo\",\"ramo\"])).trim(),placa:String(pick(r,[\"PLACA\",\"Placa\",\"placa\"])).trim(),asegurado:String(pick(r,[\"ASEGURADO\",\"Asegurado\",\"asegurado\"])).trim(),id_asegurado:String(pick(r,[\"ID ASEGURADO\",\"ID_ASEGURADO\",\"Id Asegurado\",\"id_asegurado\"])).trim(),beneficiario:String(pick(r,[\"BENEFICIARIO\",\"Beneficiario\",\"beneficiario\"])).trim(),id_beneficiario:String(pick(r,[\"ID BENEFICIARIO\",\"ID_BENEFICIARIO\",\"Id Beneficiario\",\"id_beneficiario\"])).trim(),tomador:String(pick(r,[\"TOMADOR\",\"Tomador\",\"tomador\"])).trim(),id_tomador:String(pick(r,[\"ID TOMADOR\",\"ID_TOMADOR\",\"Id Tomador\",\"id_tomador\"])).trim(),fecha_expedicion:formatYMD(pick(r,[\"FECHA EXPEDICION\",\"FECHA_EXPEDICION\",\"Fecha expedicion\",\"Fecha Expedición\",\"fecha_expedicion\"])),fecha_inicio:formatYMD(pick(r,[\"FECHA INICIO\",\"FECHA_INICIO\",\"Fecha inicio\",\"fecha_inicio\"])),fecha_fin:formatYMD(pick(r,[\"FECHA FIN\",\"FECHA_FIN\",\"Fecha fin\",\"fecha_fin\",\"FECHA TERMINACION\",\"FECHA_TERMINACION\"])),prima:parseNumber(pick(r,[\"PRIMA\",\"Prima\",\"prima\"])),gastos_expedicion:parseNumber(pick(r,[\"GASTOS EXPEDICION\",\"GASTOS_EXPEDICION\",\"Gastos expedicion\",\"gastos_expedicion\"])),iva:parseNumber(pick(r,[\"IVA\",\"Iva\",\"iva\"])),total:parseNumber(pick(r,[\"TOTAL\",\"Total\",\"total\"])),asesor:String(pick(r,[\"ASESOR\",\"Asesor\",\"asesor\"])).trim(),// Anulada (puede venir SI/NO o TRUE/FALSE)\nanulada:toSI(pick(r,[\"ANULADA\",\"Anulada\",\"anulada\"])),// Campos que en el Excel pueden venir o no, pero tú los quieres:\nrenovacion:toSI(pick(r,[\"RENOVACION\",\"RENOVACIÓN\",\"Renovacion\",\"Renovación\",\"renovacion\"])),comision:parseNumber(pick(r,[\"COMISION\",\"COMISIÓN\",\"Comision\",\"Comisión\",\"comision\"])),telefono:String(pick(r,[\"TELEFONO\",\"TELÉFONO\",\"Telefono\",\"Teléfono\",\"telefono\"])).trim()};// 4) Conservar gestión y otros si ya existían\n// (Si el Excel trae vacío, se respeta lo que hay en Firestore)\nconst conservados=[\"gestion\",\"renovacion\",\"comision\",\"telefono\"];for(let j=0;j<conservados.length;j++){const campo=conservados[j];const excelVacio=data[campo]===\"\"||data[campo]===null||data[campo]===undefined||typeof data[campo]===\"number\"&&data[campo]===0&&campo!==\"comision\";// comision 0 puede ser real, lo dejamos\nif(prev&&excelVacio&&prev[campo]!==undefined){data[campo]=prev[campo];}}// También conservar \"gestion\" SIEMPRE si existe (aunque Excel no lo traiga)\nif(prev&&prev.gestion!==undefined&&(data.gestion===undefined||data.gestion===\"\")){data.gestion=prev.gestion;}// 5) Upsert\nconst ref=doc(db,\"polizas\",idDoc);batch.set(ref,data,{merge:true});if(prev)totalActualizadas++;else totalNuevas++;}// 6) Commit batch\nsetMensaje(\"Guardando en Firestore...\");await batch.commit();setMensaje(\"✅ Listo. Leídas: \"+totalLeidas+\" | Válidas: \"+totalValidas+\" | Nuevas: \"+totalNuevas+\" | Actualizadas: \"+totalActualizadas);if(typeof onDone===\"function\")onDone();}catch(err){console.error(err);setMensaje(\"❌ Error: revisa consola (F12).\");}finally{setCargando(false);e.target.value=\"\";// permitir re-subir el mismo archivo\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border rounded p-4 shadow-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:\"Subir P\\xF3lizas (Excel)\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[\"Importa un Excel y se guarda en Firestore en la colecci\\xF3n \",/*#__PURE__*/_jsx(\"b\",{children:\"polizas\"}),\". Conserva \",/*#__PURE__*/_jsx(\"b\",{children:\"gesti\\xF3n / renovaci\\xF3n / comisi\\xF3n / tel\\xE9fono\"}),\" si ya exist\\xEDan.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:handleFile,disabled:cargando}),mensaje?/*#__PURE__*/_jsx(\"div\",{className:\"text-sm mt-2\",children:mensaje}):null,cargando?/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Procesando\\u2026\"}):null]})]});}","map":{"version":3,"names":["React","useState","XLSX","collection","getDocs","doc","writeBatch","setDoc","db","jsx","_jsx","jsxs","_jsxs","SubirPolizas","_ref","onDone","cargando","setCargando","mensaje","setMensaje","norm","v","String","toLowerCase","normalize","replace","trim","toSI","s","toUpperCase","parseNumber","undefined","isFinite","n","parseFloat","pad2","padStart","toDateSafe","value","excelEpoch","Date","UTC","d","getTime","isNaN","test","parts","split","y","parseInt","m","da","dt","formatYMD","getFullYear","getMonth","getDate","pick","row","keys","i","length","k","makeId","aseguradora","poliza","a","p","handleFile","e","file","target","files","buffer","arrayBuffer","wb","read","type","sheet","Sheets","SheetNames","rows","utils","sheet_to_json","defval","snap","existentes","docs","forEach","data","key","_objectSpread","id","batch","totalLeidas","totalValidas","totalNuevas","totalActualizadas","r","idDoc","prev","ramo","placa","asegurado","id_asegurado","beneficiario","id_beneficiario","tomador","id_tomador","fecha_expedicion","fecha_inicio","fecha_fin","prima","gastos_expedicion","iva","total","asesor","anulada","renovacion","comision","telefono","conservados","j","campo","excelVacio","gestion","ref","set","merge","commit","err","console","error","className","children","accept","onChange","disabled"],"sources":["C:/Users/HUAWEI/carpeta limpia para cargar/src/SubirPolizas.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport * as XLSX from \"xlsx\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  doc,\r\n  writeBatch,\r\n  setDoc,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"./firebase\";\r\n\r\n/**\r\n * SubirPolizas.jsx\r\n * - Importa Excel y sube a Firestore (colección: \"polizas\")\r\n * - Clave única por póliza: aseguradora + poliza\r\n * - Conserva: gestion, renovacion, comision, telefono (si ya existían en Firestore)\r\n * - Mapea encabezados comunes (mayúsculas / tildes / variantes)\r\n */\r\n\r\nexport default function SubirPolizas({ onDone }) {\r\n  const [cargando, setCargando] = useState(false);\r\n  const [mensaje, setMensaje] = useState(\"\");\r\n\r\n  // =========================\r\n  // Helpers normalización\r\n  // =========================\r\n  const norm = (v) =>\r\n    String(v ?? \"\")\r\n      .toLowerCase()\r\n      .normalize(\"NFD\")\r\n      .replace(/[\\u0300-\\u036f]/g, \"\")\r\n      .trim();\r\n\r\n  const toSI = (v) => {\r\n    if (typeof v === \"boolean\") return v ? \"SI\" : \"NO\";\r\n    const s = norm(v).toUpperCase();\r\n    if (s === \"SI\" || s === \"SÍ\" || s === \"TRUE\" || s === \"1\") return \"SI\";\r\n    if (s === \"NO\" || s === \"FALSE\" || s === \"0\") return \"NO\";\r\n    return \"NO\";\r\n  };\r\n\r\n  const parseNumber = (v) => {\r\n    if (v === null || v === undefined || v === \"\") return 0;\r\n    if (typeof v === \"number\") return isFinite(v) ? v : 0;\r\n    const s = String(v).replace(/\\./g, \"\").replace(\",\", \".\").trim();\r\n    const n = parseFloat(s);\r\n    return isFinite(n) ? n : 0;\r\n  };\r\n\r\n  // =========================\r\n  // Fechas\r\n  // =========================\r\n  const pad2 = (n) => String(n).padStart(2, \"0\");\r\n\r\n  const toDateSafe = (value) => {\r\n    if (value === null || value === undefined || value === \"\") return null;\r\n\r\n    // Excel serial\r\n    if (typeof value === \"number\" && isFinite(value)) {\r\n      const excelEpoch = new Date(Date.UTC(1899, 11, 30));\r\n      const d = new Date(excelEpoch.getTime() + value * 86400000);\r\n      return isNaN(d.getTime()) ? null : d;\r\n    }\r\n\r\n    // Date\r\n    if (value instanceof Date) {\r\n      return isNaN(value.getTime()) ? null : value;\r\n    }\r\n\r\n    // String\r\n    if (typeof value === \"string\") {\r\n      const s = value.trim();\r\n      if (!s) return null;\r\n\r\n      // YYYY-MM-DD\r\n      if (/^\\d{4}-\\d{2}-\\d{2}$/.test(s)) {\r\n        const d = new Date(s + \"T00:00:00\");\r\n        return isNaN(d.getTime()) ? null : d;\r\n      }\r\n\r\n      // YYYY/MM/DD\r\n      if (/^\\d{4}\\/\\d{2}\\/\\d{2}$/.test(s)) {\r\n        const parts = s.split(\"/\");\r\n        const y = parseInt(parts[0], 10);\r\n        const m = parseInt(parts[1], 10);\r\n        const da = parseInt(parts[2], 10);\r\n        const dt = new Date(y, m - 1, da);\r\n        return isNaN(dt.getTime()) ? null : dt;\r\n      }\r\n\r\n      // DD/MM/YYYY\r\n      if (/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(s)) {\r\n        const parts = s.split(\"/\");\r\n        const da = parseInt(parts[0], 10);\r\n        const m = parseInt(parts[1], 10);\r\n        const y = parseInt(parts[2], 10);\r\n        const dt = new Date(y, m - 1, da);\r\n        return isNaN(dt.getTime()) ? null : dt;\r\n      }\r\n\r\n      // fallback\r\n      const dt = new Date(s);\r\n      return isNaN(dt.getTime()) ? null : dt;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const formatYMD = (value) => {\r\n    const d = toDateSafe(value);\r\n    if (!d) return \"\";\r\n    const y = String(d.getFullYear());\r\n    const m = pad2(d.getMonth() + 1);\r\n    const da = pad2(d.getDate());\r\n    return y + \"-\" + m + \"-\" + da;\r\n  };\r\n\r\n  // =========================\r\n  // Encabezados (map)\r\n  // =========================\r\n  const pick = (row, keys) => {\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const k = keys[i];\r\n      if (row[k] !== undefined && row[k] !== null && String(row[k]).trim() !== \"\") {\r\n        return row[k];\r\n      }\r\n    }\r\n    return \"\";\r\n  };\r\n\r\n  // crea un id estable, sin espacios raros\r\n  const makeId = (aseguradora, poliza) => {\r\n    const a = norm(aseguradora).replace(/\\s+/g, \"_\");\r\n    const p = norm(poliza).replace(/\\s+/g, \"_\");\r\n    return (a + \"\" + p).replace(/[^a-z0-9_]+/g, \"_\");\r\n  };\r\n\r\n  // =========================\r\n  // Importación principal\r\n  // =========================\r\n  const handleFile = async (e) => {\r\n    const file = e.target.files && e.target.files[0];\r\n    if (!file) return;\r\n\r\n    setCargando(true);\r\n    setMensaje(\"Leyendo Excel...\");\r\n\r\n    try {\r\n      // 1) Leer Excel\r\n      const buffer = await file.arrayBuffer();\r\n      const wb = XLSX.read(buffer, { type: \"array\" });\r\n      const sheet = wb.Sheets[wb.SheetNames[0]];\r\n      const rows = XLSX.utils.sheet_to_json(sheet, { defval: \"\" });\r\n\r\n      if (!rows || rows.length === 0) {\r\n        setMensaje(\"El Excel está vacío.\");\r\n        setCargando(false);\r\n        return;\r\n      }\r\n\r\n      // 2) Cargar existentes para conservar gestion/renovacion/comision/telefono\r\n      setMensaje(\"Leyendo pólizas existentes en Firestore...\");\r\n      const snap = await getDocs(collection(db, \"polizas\"));\r\n      const existentes = {};\r\n      snap.docs.forEach((d) => {\r\n        const data = d.data() || {};\r\n        const a = data.aseguradora || \"\";\r\n        const p = data.poliza || \"\";\r\n        const key = makeId(a, p);\r\n        existentes[key] = { id: d.id, ...data };\r\n      });\r\n\r\n      // 3) Preparar batch\r\n      setMensaje(\"Preparando cargue...\");\r\n      const batch = writeBatch(db);\r\n\r\n      let totalLeidas = rows.length;\r\n      let totalValidas = 0;\r\n      let totalNuevas = 0;\r\n      let totalActualizadas = 0;\r\n\r\n      for (let i = 0; i < rows.length; i++) {\r\n        const r = rows[i];\r\n\r\n        // Encabezados comunes (pueden venir en mayúsculas)\r\n        const aseguradora = pick(r, [\"ASEGURADORA\", \"Aseguradora\", \"aseguradora\"]);\r\n        const poliza = pick(r, [\"POLIZA\", \"PÓLIZA\", \"Poliza\", \"Póliza\", \"poliza\"]);\r\n\r\n        if (!aseguradora || !poliza) continue;\r\n        totalValidas++;\r\n\r\n        const idDoc = makeId(aseguradora, poliza);\r\n        const prev = existentes[idDoc] || null;\r\n\r\n        // Campos requeridos por ti\r\n        const data = {\r\n          aseguradora: String(aseguradora).trim(),\r\n          poliza: String(poliza).trim(),\r\n\r\n          ramo: String(pick(r, [\"RAMO\", \"Ramo\", \"ramo\"])).trim(),\r\n          placa: String(pick(r, [\"PLACA\", \"Placa\", \"placa\"])).trim(),\r\n\r\n          asegurado: String(pick(r, [\"ASEGURADO\", \"Asegurado\", \"asegurado\"])).trim(),\r\n          id_asegurado: String(pick(r, [\"ID ASEGURADO\", \"ID_ASEGURADO\", \"Id Asegurado\", \"id_asegurado\"])).trim(),\r\n\r\n          beneficiario: String(pick(r, [\"BENEFICIARIO\", \"Beneficiario\", \"beneficiario\"])).trim(),\r\n          id_beneficiario: String(pick(r, [\"ID BENEFICIARIO\", \"ID_BENEFICIARIO\", \"Id Beneficiario\", \"id_beneficiario\"])).trim(),\r\n\r\n          tomador: String(pick(r, [\"TOMADOR\", \"Tomador\", \"tomador\"])).trim(),\r\n          id_tomador: String(pick(r, [\"ID TOMADOR\", \"ID_TOMADOR\", \"Id Tomador\", \"id_tomador\"])).trim(),\r\n\r\n          fecha_expedicion: formatYMD(pick(r, [\"FECHA EXPEDICION\", \"FECHA_EXPEDICION\", \"Fecha expedicion\", \"Fecha Expedición\", \"fecha_expedicion\"])),\r\n          fecha_inicio: formatYMD(pick(r, [\"FECHA INICIO\", \"FECHA_INICIO\", \"Fecha inicio\", \"fecha_inicio\"])),\r\n          fecha_fin: formatYMD(pick(r, [\"FECHA FIN\", \"FECHA_FIN\", \"Fecha fin\", \"fecha_fin\", \"FECHA TERMINACION\", \"FECHA_TERMINACION\"])),\r\n\r\n          prima: parseNumber(pick(r, [\"PRIMA\", \"Prima\", \"prima\"])),\r\n          gastos_expedicion: parseNumber(pick(r, [\"GASTOS EXPEDICION\", \"GASTOS_EXPEDICION\", \"Gastos expedicion\", \"gastos_expedicion\"])),\r\n          iva: parseNumber(pick(r, [\"IVA\", \"Iva\", \"iva\"])),\r\n          total: parseNumber(pick(r, [\"TOTAL\", \"Total\", \"total\"])),\r\n\r\n          asesor: String(pick(r, [\"ASESOR\", \"Asesor\", \"asesor\"])).trim(),\r\n\r\n          // Anulada (puede venir SI/NO o TRUE/FALSE)\r\n          anulada: toSI(pick(r, [\"ANULADA\", \"Anulada\", \"anulada\"])),\r\n\r\n          // Campos que en el Excel pueden venir o no, pero tú los quieres:\r\n          renovacion: toSI(pick(r, [\"RENOVACION\", \"RENOVACIÓN\", \"Renovacion\", \"Renovación\", \"renovacion\"])),\r\n\r\n          comision: parseNumber(pick(r, [\"COMISION\", \"COMISIÓN\", \"Comision\", \"Comisión\", \"comision\"])),\r\n\r\n          telefono: String(pick(r, [\"TELEFONO\", \"TELÉFONO\", \"Telefono\", \"Teléfono\", \"telefono\"])).trim(),\r\n        };\r\n\r\n        // 4) Conservar gestión y otros si ya existían\r\n        // (Si el Excel trae vacío, se respeta lo que hay en Firestore)\r\n        const conservados = [\"gestion\", \"renovacion\", \"comision\", \"telefono\"];\r\n        for (let j = 0; j < conservados.length; j++) {\r\n          const campo = conservados[j];\r\n          const excelVacio =\r\n            data[campo] === \"\" ||\r\n            data[campo] === null ||\r\n            data[campo] === undefined ||\r\n            (typeof data[campo] === \"number\" && data[campo] === 0 && campo !== \"comision\"); // comision 0 puede ser real, lo dejamos\r\n\r\n          if (prev && excelVacio && prev[campo] !== undefined) {\r\n            data[campo] = prev[campo];\r\n          }\r\n        }\r\n\r\n        // También conservar \"gestion\" SIEMPRE si existe (aunque Excel no lo traiga)\r\n        if (prev && prev.gestion !== undefined && (data.gestion === undefined || data.gestion === \"\")) {\r\n          data.gestion = prev.gestion;\r\n        }\r\n\r\n        // 5) Upsert\r\n        const ref = doc(db, \"polizas\", idDoc);\r\n        batch.set(ref, data, { merge: true });\r\n\r\n        if (prev) totalActualizadas++;\r\n        else totalNuevas++;\r\n      }\r\n\r\n      // 6) Commit batch\r\n      setMensaje(\"Guardando en Firestore...\");\r\n      await batch.commit();\r\n\r\n      setMensaje(\r\n        \"✅ Listo. Leídas: \" +\r\n          totalLeidas +\r\n          \" | Válidas: \" +\r\n          totalValidas +\r\n          \" | Nuevas: \" +\r\n          totalNuevas +\r\n          \" | Actualizadas: \" +\r\n          totalActualizadas\r\n      );\r\n\r\n      if (typeof onDone === \"function\") onDone();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMensaje(\"❌ Error: revisa consola (F12).\");\r\n    } finally {\r\n      setCargando(false);\r\n      e.target.value = \"\"; // permitir re-subir el mismo archivo\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white border rounded p-4 shadow-sm\">\r\n      <h3 className=\"text-lg font-semibold text-gray-800\">Subir Pólizas (Excel)</h3>\r\n      <p className=\"text-sm text-gray-600 mt-1\">\r\n        Importa un Excel y se guarda en Firestore en la colección <b>polizas</b>.\r\n        Conserva <b>gestión / renovación / comisión / teléfono</b> si ya existían.\r\n      </p>\r\n\r\n      <div className=\"mt-4 flex flex-col gap-2\">\r\n        <input\r\n          type=\"file\"\r\n          accept=\".xlsx,.xls\"\r\n          onChange={handleFile}\r\n          disabled={cargando}\r\n        />\r\n\r\n        {mensaje ? (\r\n          <div className=\"text-sm mt-2\">\r\n            {mensaje}\r\n          </div>\r\n        ) : null}\r\n\r\n        {cargando ? (\r\n          <div className=\"text-xs text-gray-500\">Procesando…</div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"+HAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,GAAK,CAAAC,IAAI,KAAM,MAAM,CAC5B,OACEC,UAAU,CACVC,OAAO,CACPC,GAAG,CACHC,UAAU,CACVC,MAAM,KACD,oBAAoB,CAC3B,OAASC,EAAE,KAAQ,YAAY,CAE/B;AACA;AACA;AACA;AACA;AACA;AACA,GANA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAQA,cAAe,SAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAa,IAAZ,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC7C,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAE1C;AACA;AACA;AACA,KAAM,CAAAmB,IAAI,CAAIC,CAAC,EACbC,MAAM,CAACD,CAAC,SAADA,CAAC,UAADA,CAAC,CAAI,EAAE,CAAC,CACZE,WAAW,CAAC,CAAC,CACbC,SAAS,CAAC,KAAK,CAAC,CAChBC,OAAO,CAAC,kBAAkB,CAAE,EAAE,CAAC,CAC/BC,IAAI,CAAC,CAAC,CAEX,KAAM,CAAAC,IAAI,CAAIN,CAAC,EAAK,CAClB,GAAI,MAAO,CAAAA,CAAC,GAAK,SAAS,CAAE,MAAO,CAAAA,CAAC,CAAG,IAAI,CAAG,IAAI,CAClD,KAAM,CAAAO,CAAC,CAAGR,IAAI,CAACC,CAAC,CAAC,CAACQ,WAAW,CAAC,CAAC,CAC/B,GAAID,CAAC,GAAK,IAAI,EAAIA,CAAC,GAAK,IAAI,EAAIA,CAAC,GAAK,MAAM,EAAIA,CAAC,GAAK,GAAG,CAAE,MAAO,IAAI,CACtE,GAAIA,CAAC,GAAK,IAAI,EAAIA,CAAC,GAAK,OAAO,EAAIA,CAAC,GAAK,GAAG,CAAE,MAAO,IAAI,CACzD,MAAO,IAAI,CACb,CAAC,CAED,KAAM,CAAAE,WAAW,CAAIT,CAAC,EAAK,CACzB,GAAIA,CAAC,GAAK,IAAI,EAAIA,CAAC,GAAKU,SAAS,EAAIV,CAAC,GAAK,EAAE,CAAE,MAAO,EAAC,CACvD,GAAI,MAAO,CAAAA,CAAC,GAAK,QAAQ,CAAE,MAAO,CAAAW,QAAQ,CAACX,CAAC,CAAC,CAAGA,CAAC,CAAG,CAAC,CACrD,KAAM,CAAAO,CAAC,CAAGN,MAAM,CAACD,CAAC,CAAC,CAACI,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAACA,OAAO,CAAC,GAAG,CAAE,GAAG,CAAC,CAACC,IAAI,CAAC,CAAC,CAC/D,KAAM,CAAAO,CAAC,CAAGC,UAAU,CAACN,CAAC,CAAC,CACvB,MAAO,CAAAI,QAAQ,CAACC,CAAC,CAAC,CAAGA,CAAC,CAAG,CAAC,CAC5B,CAAC,CAED;AACA;AACA;AACA,KAAM,CAAAE,IAAI,CAAIF,CAAC,EAAKX,MAAM,CAACW,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAE9C,KAAM,CAAAC,UAAU,CAAIC,KAAK,EAAK,CAC5B,GAAIA,KAAK,GAAK,IAAI,EAAIA,KAAK,GAAKP,SAAS,EAAIO,KAAK,GAAK,EAAE,CAAE,MAAO,KAAI,CAEtE;AACA,GAAI,MAAO,CAAAA,KAAK,GAAK,QAAQ,EAAIN,QAAQ,CAACM,KAAK,CAAC,CAAE,CAChD,KAAM,CAAAC,UAAU,CAAG,GAAI,CAAAC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,IAAI,CAAE,EAAE,CAAE,EAAE,CAAC,CAAC,CACnD,KAAM,CAAAC,CAAC,CAAG,GAAI,CAAAF,IAAI,CAACD,UAAU,CAACI,OAAO,CAAC,CAAC,CAAGL,KAAK,CAAG,QAAQ,CAAC,CAC3D,MAAO,CAAAM,KAAK,CAACF,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAAG,IAAI,CAAGD,CAAC,CACtC,CAEA;AACA,GAAIJ,KAAK,WAAY,CAAAE,IAAI,CAAE,CACzB,MAAO,CAAAI,KAAK,CAACN,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC,CAAG,IAAI,CAAGL,KAAK,CAC9C,CAEA;AACA,GAAI,MAAO,CAAAA,KAAK,GAAK,QAAQ,CAAE,CAC7B,KAAM,CAAAV,CAAC,CAAGU,KAAK,CAACZ,IAAI,CAAC,CAAC,CACtB,GAAI,CAACE,CAAC,CAAE,MAAO,KAAI,CAEnB;AACA,GAAI,qBAAqB,CAACiB,IAAI,CAACjB,CAAC,CAAC,CAAE,CACjC,KAAM,CAAAc,CAAC,CAAG,GAAI,CAAAF,IAAI,CAACZ,CAAC,CAAG,WAAW,CAAC,CACnC,MAAO,CAAAgB,KAAK,CAACF,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAAG,IAAI,CAAGD,CAAC,CACtC,CAEA;AACA,GAAI,uBAAuB,CAACG,IAAI,CAACjB,CAAC,CAAC,CAAE,CACnC,KAAM,CAAAkB,KAAK,CAAGlB,CAAC,CAACmB,KAAK,CAAC,GAAG,CAAC,CAC1B,KAAM,CAAAC,CAAC,CAAGC,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,CAAE,EAAE,CAAC,CAChC,KAAM,CAAAI,CAAC,CAAGD,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,CAAE,EAAE,CAAC,CAChC,KAAM,CAAAK,EAAE,CAAGF,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,CAAE,EAAE,CAAC,CACjC,KAAM,CAAAM,EAAE,CAAG,GAAI,CAAAZ,IAAI,CAACQ,CAAC,CAAEE,CAAC,CAAG,CAAC,CAAEC,EAAE,CAAC,CACjC,MAAO,CAAAP,KAAK,CAACQ,EAAE,CAACT,OAAO,CAAC,CAAC,CAAC,CAAG,IAAI,CAAGS,EAAE,CACxC,CAEA;AACA,GAAI,uBAAuB,CAACP,IAAI,CAACjB,CAAC,CAAC,CAAE,CACnC,KAAM,CAAAkB,KAAK,CAAGlB,CAAC,CAACmB,KAAK,CAAC,GAAG,CAAC,CAC1B,KAAM,CAAAI,EAAE,CAAGF,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,CAAE,EAAE,CAAC,CACjC,KAAM,CAAAI,CAAC,CAAGD,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,CAAE,EAAE,CAAC,CAChC,KAAM,CAAAE,CAAC,CAAGC,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,CAAE,EAAE,CAAC,CAChC,KAAM,CAAAM,EAAE,CAAG,GAAI,CAAAZ,IAAI,CAACQ,CAAC,CAAEE,CAAC,CAAG,CAAC,CAAEC,EAAE,CAAC,CACjC,MAAO,CAAAP,KAAK,CAACQ,EAAE,CAACT,OAAO,CAAC,CAAC,CAAC,CAAG,IAAI,CAAGS,EAAE,CACxC,CAEA;AACA,KAAM,CAAAA,EAAE,CAAG,GAAI,CAAAZ,IAAI,CAACZ,CAAC,CAAC,CACtB,MAAO,CAAAgB,KAAK,CAACQ,EAAE,CAACT,OAAO,CAAC,CAAC,CAAC,CAAG,IAAI,CAAGS,EAAE,CACxC,CAEA,MAAO,KAAI,CACb,CAAC,CAED,KAAM,CAAAC,SAAS,CAAIf,KAAK,EAAK,CAC3B,KAAM,CAAAI,CAAC,CAAGL,UAAU,CAACC,KAAK,CAAC,CAC3B,GAAI,CAACI,CAAC,CAAE,MAAO,EAAE,CACjB,KAAM,CAAAM,CAAC,CAAG1B,MAAM,CAACoB,CAAC,CAACY,WAAW,CAAC,CAAC,CAAC,CACjC,KAAM,CAAAJ,CAAC,CAAGf,IAAI,CAACO,CAAC,CAACa,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAC,CAChC,KAAM,CAAAJ,EAAE,CAAGhB,IAAI,CAACO,CAAC,CAACc,OAAO,CAAC,CAAC,CAAC,CAC5B,MAAO,CAAAR,CAAC,CAAG,GAAG,CAAGE,CAAC,CAAG,GAAG,CAAGC,EAAE,CAC/B,CAAC,CAED;AACA;AACA;AACA,KAAM,CAAAM,IAAI,CAAGA,CAACC,GAAG,CAAEC,IAAI,GAAK,CAC1B,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGD,IAAI,CAACE,MAAM,CAAED,CAAC,EAAE,CAAE,CACpC,KAAM,CAAAE,CAAC,CAAGH,IAAI,CAACC,CAAC,CAAC,CACjB,GAAIF,GAAG,CAACI,CAAC,CAAC,GAAK/B,SAAS,EAAI2B,GAAG,CAACI,CAAC,CAAC,GAAK,IAAI,EAAIxC,MAAM,CAACoC,GAAG,CAACI,CAAC,CAAC,CAAC,CAACpC,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CAC3E,MAAO,CAAAgC,GAAG,CAACI,CAAC,CAAC,CACf,CACF,CACA,MAAO,EAAE,CACX,CAAC,CAED;AACA,KAAM,CAAAC,MAAM,CAAGA,CAACC,WAAW,CAAEC,MAAM,GAAK,CACtC,KAAM,CAAAC,CAAC,CAAG9C,IAAI,CAAC4C,WAAW,CAAC,CAACvC,OAAO,CAAC,MAAM,CAAE,GAAG,CAAC,CAChD,KAAM,CAAA0C,CAAC,CAAG/C,IAAI,CAAC6C,MAAM,CAAC,CAACxC,OAAO,CAAC,MAAM,CAAE,GAAG,CAAC,CAC3C,MAAO,CAACyC,CAAC,CAAG,EAAE,CAAGC,CAAC,EAAE1C,OAAO,CAAC,cAAc,CAAE,GAAG,CAAC,CAClD,CAAC,CAED;AACA;AACA;AACA,KAAM,CAAA2C,UAAU,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC9B,KAAM,CAAAC,IAAI,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,EAAIH,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAChD,GAAI,CAACF,IAAI,CAAE,OAEXrD,WAAW,CAAC,IAAI,CAAC,CACjBE,UAAU,CAAC,kBAAkB,CAAC,CAE9B,GAAI,CACF;AACA,KAAM,CAAAsD,MAAM,CAAG,KAAM,CAAAH,IAAI,CAACI,WAAW,CAAC,CAAC,CACvC,KAAM,CAAAC,EAAE,CAAGzE,IAAI,CAAC0E,IAAI,CAACH,MAAM,CAAE,CAAEI,IAAI,CAAE,OAAQ,CAAC,CAAC,CAC/C,KAAM,CAAAC,KAAK,CAAGH,EAAE,CAACI,MAAM,CAACJ,EAAE,CAACK,UAAU,CAAC,CAAC,CAAC,CAAC,CACzC,KAAM,CAAAC,IAAI,CAAG/E,IAAI,CAACgF,KAAK,CAACC,aAAa,CAACL,KAAK,CAAE,CAAEM,MAAM,CAAE,EAAG,CAAC,CAAC,CAE5D,GAAI,CAACH,IAAI,EAAIA,IAAI,CAACpB,MAAM,GAAK,CAAC,CAAE,CAC9B1C,UAAU,CAAC,sBAAsB,CAAC,CAClCF,WAAW,CAAC,KAAK,CAAC,CAClB,OACF,CAEA;AACAE,UAAU,CAAC,4CAA4C,CAAC,CACxD,KAAM,CAAAkE,IAAI,CAAG,KAAM,CAAAjF,OAAO,CAACD,UAAU,CAACK,EAAE,CAAE,SAAS,CAAC,CAAC,CACrD,KAAM,CAAA8E,UAAU,CAAG,CAAC,CAAC,CACrBD,IAAI,CAACE,IAAI,CAACC,OAAO,CAAE9C,CAAC,EAAK,CACvB,KAAM,CAAA+C,IAAI,CAAG/C,CAAC,CAAC+C,IAAI,CAAC,CAAC,EAAI,CAAC,CAAC,CAC3B,KAAM,CAAAvB,CAAC,CAAGuB,IAAI,CAACzB,WAAW,EAAI,EAAE,CAChC,KAAM,CAAAG,CAAC,CAAGsB,IAAI,CAACxB,MAAM,EAAI,EAAE,CAC3B,KAAM,CAAAyB,GAAG,CAAG3B,MAAM,CAACG,CAAC,CAAEC,CAAC,CAAC,CACxBmB,UAAU,CAACI,GAAG,CAAC,CAAAC,aAAA,EAAKC,EAAE,CAAElD,CAAC,CAACkD,EAAE,EAAKH,IAAI,CAAE,CACzC,CAAC,CAAC,CAEF;AACAtE,UAAU,CAAC,sBAAsB,CAAC,CAClC,KAAM,CAAA0E,KAAK,CAAGvF,UAAU,CAACE,EAAE,CAAC,CAE5B,GAAI,CAAAsF,WAAW,CAAGb,IAAI,CAACpB,MAAM,CAC7B,GAAI,CAAAkC,YAAY,CAAG,CAAC,CACpB,GAAI,CAAAC,WAAW,CAAG,CAAC,CACnB,GAAI,CAAAC,iBAAiB,CAAG,CAAC,CAEzB,IAAK,GAAI,CAAArC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGqB,IAAI,CAACpB,MAAM,CAAED,CAAC,EAAE,CAAE,CACpC,KAAM,CAAAsC,CAAC,CAAGjB,IAAI,CAACrB,CAAC,CAAC,CAEjB;AACA,KAAM,CAAAI,WAAW,CAAGP,IAAI,CAACyC,CAAC,CAAE,CAAC,aAAa,CAAE,aAAa,CAAE,aAAa,CAAC,CAAC,CAC1E,KAAM,CAAAjC,MAAM,CAAGR,IAAI,CAACyC,CAAC,CAAE,CAAC,QAAQ,CAAE,QAAQ,CAAE,QAAQ,CAAE,QAAQ,CAAE,QAAQ,CAAC,CAAC,CAE1E,GAAI,CAAClC,WAAW,EAAI,CAACC,MAAM,CAAE,SAC7B8B,YAAY,EAAE,CAEd,KAAM,CAAAI,KAAK,CAAGpC,MAAM,CAACC,WAAW,CAAEC,MAAM,CAAC,CACzC,KAAM,CAAAmC,IAAI,CAAGd,UAAU,CAACa,KAAK,CAAC,EAAI,IAAI,CAEtC;AACA,KAAM,CAAAV,IAAI,CAAG,CACXzB,WAAW,CAAE1C,MAAM,CAAC0C,WAAW,CAAC,CAACtC,IAAI,CAAC,CAAC,CACvCuC,MAAM,CAAE3C,MAAM,CAAC2C,MAAM,CAAC,CAACvC,IAAI,CAAC,CAAC,CAE7B2E,IAAI,CAAE/E,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,MAAM,CAAE,MAAM,CAAE,MAAM,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAAC,CACtD4E,KAAK,CAAEhF,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,OAAO,CAAE,OAAO,CAAE,OAAO,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAAC,CAE1D6E,SAAS,CAAEjF,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,WAAW,CAAE,WAAW,CAAE,WAAW,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAAC,CAC1E8E,YAAY,CAAElF,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,cAAc,CAAE,cAAc,CAAE,cAAc,CAAE,cAAc,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAAC,CAEtG+E,YAAY,CAAEnF,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,cAAc,CAAE,cAAc,CAAE,cAAc,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAAC,CACtFgF,eAAe,CAAEpF,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,iBAAiB,CAAE,iBAAiB,CAAE,iBAAiB,CAAE,iBAAiB,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAAC,CAErHiF,OAAO,CAAErF,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,SAAS,CAAE,SAAS,CAAE,SAAS,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAAC,CAClEkF,UAAU,CAAEtF,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,YAAY,CAAE,YAAY,CAAE,YAAY,CAAE,YAAY,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAAC,CAE5FmF,gBAAgB,CAAExD,SAAS,CAACI,IAAI,CAACyC,CAAC,CAAE,CAAC,kBAAkB,CAAE,kBAAkB,CAAE,kBAAkB,CAAE,kBAAkB,CAAE,kBAAkB,CAAC,CAAC,CAAC,CAC1IY,YAAY,CAAEzD,SAAS,CAACI,IAAI,CAACyC,CAAC,CAAE,CAAC,cAAc,CAAE,cAAc,CAAE,cAAc,CAAE,cAAc,CAAC,CAAC,CAAC,CAClGa,SAAS,CAAE1D,SAAS,CAACI,IAAI,CAACyC,CAAC,CAAE,CAAC,WAAW,CAAE,WAAW,CAAE,WAAW,CAAE,WAAW,CAAE,mBAAmB,CAAE,mBAAmB,CAAC,CAAC,CAAC,CAE7Hc,KAAK,CAAElF,WAAW,CAAC2B,IAAI,CAACyC,CAAC,CAAE,CAAC,OAAO,CAAE,OAAO,CAAE,OAAO,CAAC,CAAC,CAAC,CACxDe,iBAAiB,CAAEnF,WAAW,CAAC2B,IAAI,CAACyC,CAAC,CAAE,CAAC,mBAAmB,CAAE,mBAAmB,CAAE,mBAAmB,CAAE,mBAAmB,CAAC,CAAC,CAAC,CAC7HgB,GAAG,CAAEpF,WAAW,CAAC2B,IAAI,CAACyC,CAAC,CAAE,CAAC,KAAK,CAAE,KAAK,CAAE,KAAK,CAAC,CAAC,CAAC,CAChDiB,KAAK,CAAErF,WAAW,CAAC2B,IAAI,CAACyC,CAAC,CAAE,CAAC,OAAO,CAAE,OAAO,CAAE,OAAO,CAAC,CAAC,CAAC,CAExDkB,MAAM,CAAE9F,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,QAAQ,CAAE,QAAQ,CAAE,QAAQ,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAAC,CAE9D;AACA2F,OAAO,CAAE1F,IAAI,CAAC8B,IAAI,CAACyC,CAAC,CAAE,CAAC,SAAS,CAAE,SAAS,CAAE,SAAS,CAAC,CAAC,CAAC,CAEzD;AACAoB,UAAU,CAAE3F,IAAI,CAAC8B,IAAI,CAACyC,CAAC,CAAE,CAAC,YAAY,CAAE,YAAY,CAAE,YAAY,CAAE,YAAY,CAAE,YAAY,CAAC,CAAC,CAAC,CAEjGqB,QAAQ,CAAEzF,WAAW,CAAC2B,IAAI,CAACyC,CAAC,CAAE,CAAC,UAAU,CAAE,UAAU,CAAE,UAAU,CAAE,UAAU,CAAE,UAAU,CAAC,CAAC,CAAC,CAE5FsB,QAAQ,CAAElG,MAAM,CAACmC,IAAI,CAACyC,CAAC,CAAE,CAAC,UAAU,CAAE,UAAU,CAAE,UAAU,CAAE,UAAU,CAAE,UAAU,CAAC,CAAC,CAAC,CAACxE,IAAI,CAAC,CAC/F,CAAC,CAED;AACA;AACA,KAAM,CAAA+F,WAAW,CAAG,CAAC,SAAS,CAAE,YAAY,CAAE,UAAU,CAAE,UAAU,CAAC,CACrE,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGD,WAAW,CAAC5D,MAAM,CAAE6D,CAAC,EAAE,CAAE,CAC3C,KAAM,CAAAC,KAAK,CAAGF,WAAW,CAACC,CAAC,CAAC,CAC5B,KAAM,CAAAE,UAAU,CACdnC,IAAI,CAACkC,KAAK,CAAC,GAAK,EAAE,EAClBlC,IAAI,CAACkC,KAAK,CAAC,GAAK,IAAI,EACpBlC,IAAI,CAACkC,KAAK,CAAC,GAAK5F,SAAS,EACxB,MAAO,CAAA0D,IAAI,CAACkC,KAAK,CAAC,GAAK,QAAQ,EAAIlC,IAAI,CAACkC,KAAK,CAAC,GAAK,CAAC,EAAIA,KAAK,GAAK,UAAW,CAAE;AAElF,GAAIvB,IAAI,EAAIwB,UAAU,EAAIxB,IAAI,CAACuB,KAAK,CAAC,GAAK5F,SAAS,CAAE,CACnD0D,IAAI,CAACkC,KAAK,CAAC,CAAGvB,IAAI,CAACuB,KAAK,CAAC,CAC3B,CACF,CAEA;AACA,GAAIvB,IAAI,EAAIA,IAAI,CAACyB,OAAO,GAAK9F,SAAS,GAAK0D,IAAI,CAACoC,OAAO,GAAK9F,SAAS,EAAI0D,IAAI,CAACoC,OAAO,GAAK,EAAE,CAAC,CAAE,CAC7FpC,IAAI,CAACoC,OAAO,CAAGzB,IAAI,CAACyB,OAAO,CAC7B,CAEA;AACA,KAAM,CAAAC,GAAG,CAAGzH,GAAG,CAACG,EAAE,CAAE,SAAS,CAAE2F,KAAK,CAAC,CACrCN,KAAK,CAACkC,GAAG,CAACD,GAAG,CAAErC,IAAI,CAAE,CAAEuC,KAAK,CAAE,IAAK,CAAC,CAAC,CAErC,GAAI5B,IAAI,CAAEH,iBAAiB,EAAE,CAAC,IACzB,CAAAD,WAAW,EAAE,CACpB,CAEA;AACA7E,UAAU,CAAC,2BAA2B,CAAC,CACvC,KAAM,CAAA0E,KAAK,CAACoC,MAAM,CAAC,CAAC,CAEpB9G,UAAU,CACR,mBAAmB,CACjB2E,WAAW,CACX,cAAc,CACdC,YAAY,CACZ,aAAa,CACbC,WAAW,CACX,mBAAmB,CACnBC,iBACJ,CAAC,CAED,GAAI,MAAO,CAAAlF,MAAM,GAAK,UAAU,CAAEA,MAAM,CAAC,CAAC,CAC5C,CAAE,MAAOmH,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAClB/G,UAAU,CAAC,gCAAgC,CAAC,CAC9C,CAAC,OAAS,CACRF,WAAW,CAAC,KAAK,CAAC,CAClBoD,CAAC,CAACE,MAAM,CAACjC,KAAK,CAAG,EAAE,CAAE;AACvB,CACF,CAAC,CAED,mBACE1B,KAAA,QAAKyH,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpD5H,IAAA,OAAI2H,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,0BAAqB,CAAI,CAAC,cAC9E1H,KAAA,MAAGyH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAC,+DACkB,cAAA5H,IAAA,MAAA4H,QAAA,CAAG,SAAO,CAAG,CAAC,cAC/D,cAAA5H,IAAA,MAAA4H,QAAA,CAAG,wDAA0C,CAAG,CAAC,sBAC5D,EAAG,CAAC,cAEJ1H,KAAA,QAAKyH,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvC5H,IAAA,UACEmE,IAAI,CAAC,MAAM,CACX0D,MAAM,CAAC,YAAY,CACnBC,QAAQ,CAAEpE,UAAW,CACrBqE,QAAQ,CAAEzH,QAAS,CACpB,CAAC,CAEDE,OAAO,cACNR,IAAA,QAAK2H,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BpH,OAAO,CACL,CAAC,CACJ,IAAI,CAEPF,QAAQ,cACPN,IAAA,QAAK2H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,kBAAW,CAAK,CAAC,CACtD,IAAI,EACL,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}