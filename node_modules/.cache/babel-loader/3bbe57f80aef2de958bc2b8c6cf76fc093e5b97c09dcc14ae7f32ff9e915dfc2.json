{"ast":null,"code":"import _objectSpread from\"C:/Users/HUAWEI/carpeta limpia para cargar/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,Fragment}from\"react\";import{db}from\"./firebase\";import*as XLSX from\"xlsx\";import{saveAs}from\"file-saver\";import{collection,getDocs,updateDoc,doc,deleteDoc,writeBatch}from\"firebase/firestore\";import SubirCartera from\"./SubirCartera\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const aseguradorasFijas=[\"Allianz\",\"Sura\",\"Estado\",\"Previsora\",\"Mundial\",\"Solidaria\",\"Axa\",\"Mafre\",\"Sbs\",\"Hdi\"];const VerCartera=()=>{// --- UI / estado general ---\nconst[data,setData]=useState([]);const[searchTerm,setSearchTerm]=useState(\"\");const[filterStatus,setFilterStatus]=useState(\"todos\");const[filterAseguradora,setFilterAseguradora]=useState(\"todas\");const[alerta,setAlerta]=useState({tipo:\"\",mensaje:\"\"});// --- Gestión inline por fila ---\nconst[openRowId,setOpenRowId]=useState(null);const[selectedPoliza,setSelectedPoliza]=useState(null);const[selectedDocId,setSelectedDocId]=useState(null);const[gestionText,setGestionText]=useState(\"\");const[rowRecaudada,setRowRecaudada]=useState(\"\");// --- Contadores ---\nconst[vigentes,setVigentes]=useState(0);const[proximas,setProximas]=useState(0);const[vencidas,setVencidas]=useState(0);const[anuladas,setAnuladas]=useState(0);const[gestionSi,setGestionSi]=useState(0);const[gestionTexto,setGestionTexto]=useState(0);const[filtroGestion,setFiltroGestion]=useState(\"todos\");// --- Negativos ---\nconst[negativos,setNegativos]=useState(0);const[negativosTotal,setNegativosTotal]=useState(0);// --- Estado de borrado masivo ---\nconst[borrando,setBorrando]=useState(false);useEffect(()=>{setFiltroGestion(\"todos\");},[filterStatus,filterAseguradora]);// ================== HELPERS ==================\nconst calcularDiasDesdeEmision=fechaEmision=>{if(!fechaEmision)return 0;let partes=fechaEmision.includes(\"-\")?fechaEmision.split(\"-\"):fechaEmision.split(\"/\").reverse();const hoy=new Date();const fecha=new Date(+partes[0],+partes[1]-1,+partes[2]);return Math.floor((hoy-fecha)/(1000*60*60*24));};const getRowColor=(fechaEmision,recaudada,anulada)=>{if((anulada||\"\").toLowerCase().trim()===\"sí\")return\"#e5e7eb\";const dias=calcularDiasDesdeEmision(fechaEmision);if((recaudada||\"\").toLowerCase()===\"sí\")return\"#bfdbfe\";if(dias>=31)return\"#fecaca\";if(dias>=25)return\"#fef08a\";return\"#bbf7d0\";};// --- MONTO (lee de 'valor' y, si no, de 'pendiente') ---\nconst getMontoRaw=row=>{var _ref,_row$valor;const keys=[\"valor\",\"Valor\",\"pendiente\",\"Pendiente\",\"PENDIENTE\"];for(const k of keys)if(row&&Object.prototype.hasOwnProperty.call(row,k))return row[k];return(_ref=(_row$valor=row===null||row===void 0?void 0:row.valor)!==null&&_row$valor!==void 0?_row$valor:row===null||row===void 0?void 0:row.pendiente)!==null&&_ref!==void 0?_ref:\"\";};// Parser ULTRA robusto (maneja -, −, (xxxx), 1.234,56 / 1,234.56 / $ 1.234, etc.)\nconst parseMoney=v=>{let s=String(v!==null&&v!==void 0?v:\"\").trim();if(!s)return 0;// normaliza guiones raros y NBSP\ns=s.replace(/[\\u2010-\\u2015\\u2212]/g,\"-\").replace(/\\u00A0/g,\"\");// negativo por paréntesis\nconst parenNeg=/^\\(.*\\)$/.test(s);// deja solo dígitos, separadores y signo\ns=s.replace(/[^\\d.,-]/g,\"\");// si hay . y , asumimos formato EU (1.234,56)\nif(s.includes(\".\")&&s.includes(\",\")){s=s.replace(/\\./g,\"\").replace(/,/g,\".\");}else{if(s.includes(\",\")&&!s.includes(\".\")){const last=s.lastIndexOf(\",\");s=s.slice(0,last).replace(/,/g,\"\")+\".\"+s.slice(last+1);}else if(s.includes(\".\")){const last=s.lastIndexOf(\".\");s=s.slice(0,last).replace(/\\./g,\"\")+\".\"+s.slice(last+1);}}const hadMinus=/-/.test(s);s=s.replace(/-/g,\"\");let num=parseFloat(s);if(isNaN(num))num=0;if(hadMinus||parenNeg)num=-Math.abs(num);return num;};const getMontoNumber=row=>parseMoney(getMontoRaw(row));const esNegativo=row=>getMontoNumber(row)<0;// Categorizadores\nconst esVigente=row=>{const g=(row.gestion||\"\").toLowerCase().trim();const a=(row.anulada||\"\").toLowerCase().trim();const f=row.fecha_emision;if(!f||g===\"sí\"||a===\"sí\")return false;const d=calcularDiasDesdeEmision(f);return d<25;};const esProximo=row=>{const g=(row.gestion||\"\").toLowerCase().trim();const a=(row.anulada||\"\").toLowerCase().trim();const f=row.fecha_emision;if(!f||g===\"sí\"||a===\"sí\")return false;const d=calcularDiasDesdeEmision(f);return d>=25&&d<=30;};const esVencida=row=>{const g=(row.gestion||\"\").toLowerCase().trim();const a=(row.anulada||\"\").toLowerCase().trim();const f=row.fecha_emision;if(!f||g===\"sí\"||a===\"sí\")return false;const d=calcularDiasDesdeEmision(f);return d>=31;};const esAnulada=row=>(row.anulada||\"\").toLowerCase().trim()===\"sí\";const esGestionSi=row=>{const g=(row.gestion||\"\").toLowerCase().trim();return g===\"sí\"||g===\"si\";};const esGestionTexto=row=>{const g=(row.gestion||\"\").toLowerCase().trim();return g!==\"\"&&g!==\"si\"&&g!==\"sí\";};// ================== CARGA DE DATOS ==================\nconst cargarDatos=async()=>{const snap=await getDocs(collection(db,\"cartera\"));const documentos=snap.docs.map(d=>_objectSpread({id:d.id},d.data()));const anuladasValidas=documentos.filter(d=>{const anulada=(d.anulada||\"\").toLowerCase().trim();const tieneMinimos=d.poliza&&d.aseguradora&&d.nombre;return!(anulada===\"sí\"&&!tieneMinimos);});setData(anuladasValidas);};useEffect(()=>{cargarDatos();},[]);// ================== CONTADORES ==================\nuseEffect(()=>{const dataFiltrada=filterAseguradora===\"todas\"?data:data.filter(row=>(row.aseguradora||\"\").toLowerCase().trim()===filterAseguradora.toLowerCase());setVigentes(dataFiltrada.filter(esVigente).length);setProximas(dataFiltrada.filter(esProximo).length);setVencidas(dataFiltrada.filter(esVencida).length);setAnuladas(dataFiltrada.filter(esAnulada).length);setGestionSi(dataFiltrada.filter(esGestionSi).length);setGestionTexto(dataFiltrada.filter(esGestionTexto).length);const negRows=dataFiltrada.filter(esNegativo);setNegativos(negRows.length);setNegativosTotal(negRows.reduce((acc,r)=>acc+getMontoNumber(r),0));},[data,filterAseguradora]);// ================== EXPORTAR ==================\nconst exportarExcel=()=>{const wb=XLSX.utils.book_new();const wsData=data.map(row=>({Aseguradora:row.aseguradora,Nombre:row.nombre,Asesor:row.asesor,Placa:row.placa,Ramo:row.ramo,Poliza:row.poliza,\"Fecha Emision\":row.fecha_emision,\"Fecha Vencimiento\":row.fecha_vencimiento,Valor:row.valor,Recaudada:row.recaudada,Observacion:row.observacion}));const ws=XLSX.utils.json_to_sheet(wsData);XLSX.utils.book_append_sheet(wb,ws,\"Cartera\");const excelBuffer=XLSX.write(wb,{bookType:\"xlsx\",type:\"array\"});const blob=new Blob([excelBuffer],{type:\"application/octet-stream\"});saveAs(blob,\"cartera_exportada.xlsx\");};// ================== WHATSAPP ==================\nconst enviarAlertaWhatsapp=async()=>{const numeroDestino=\"whatsapp:+573242139020\";const proximasVencidas=data.filter(row=>{const dias=calcularDiasDesdeEmision(row[\"fecha_emision\"]);return dias>=25&&dias<=30;});if(!proximasVencidas.length)return window.alert(\"No hay pólizas próximas a vencer.\");const mensaje=proximasVencidas.map(p=>\"\\u2022 P\\xF3liza: \".concat(p.poliza,\", Emisi\\xF3n: \").concat(p.fecha_emision)).join(\"\\n\");const cuerpo=\"\\u26A0\\uFE0F *ALERTA DE CARTERA PR\\xD3XIMA A VENCER* \\u26A0\\uFE0F\\n\\n\".concat(mensaje);try{const r=await fetch(\"http://localhost:3000/send-alert\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({to:numeroDestino,message:cuerpo})});if(!r.ok)return window.alert(\"Error: \"+(await r.text()));window.alert(\"¡Alerta enviada exitosamente!\");}catch(e){window.alert(\"Error de red: \"+e.message);}};// ================== BORRADOS POR CONTADOR ==================\nconst borrarPorFiltro=async(nombreGrupo,predicado)=>{const ok1=window.confirm(\"\\u26A0\\uFE0F Vas a BORRAR definitivamente las p\\xF3lizas del grupo \\\"\".concat(nombreGrupo,\"\\\". \\xBFContinuar?\"));if(!ok1)return;const ok2=(window.prompt(\"Escribe BORRAR para confirmar el borrado de \\\"\".concat(nombreGrupo,\"\\\".\"))||\"\").toUpperCase();if(ok2!==\"BORRAR\")return;try{setBorrando(true);const snap=await getDocs(collection(db,\"cartera\"));const objetivos=snap.docs.filter(d=>predicado(_objectSpread({id:d.id},d.data())));if(!objetivos.length){setBorrando(false);return window.alert(\"No hay documentos en \\\"\".concat(nombreGrupo,\"\\\" para borrar.\"));}let total=0;for(let i=0;i<objetivos.length;i+=450){const chunk=objetivos.slice(i,i+450);const batch=writeBatch(db);chunk.forEach(d=>batch.delete(doc(db,\"cartera\",d.id)));await batch.commit();total+=chunk.length;await new Promise(r=>setTimeout(r,25));}await cargarDatos();setAlerta({tipo:\"ok\",mensaje:\"Borradas \".concat(total,\" p\\xF3lizas del grupo \\\"\").concat(nombreGrupo,\"\\\".\")});setTimeout(()=>setAlerta({tipo:\"\",mensaje:\"\"}),3000);}catch(e){console.error(e);setAlerta({tipo:\"error\",mensaje:\"No se pudo borrar \\\"\".concat(nombreGrupo,\"\\\".\")});setTimeout(()=>setAlerta({tipo:\"\",mensaje:\"\"}),3500);}finally{setBorrando(false);}};const confirmarEliminacion=async id=>{if(!window.confirm(\"¿Deseas eliminar esta póliza anulada permanentemente?\"))return;await deleteDoc(doc(db,\"cartera\",id));window.alert(\"Póliza eliminada definitivamente.\");cargarDatos();};const formatCOP=n=>new Intl.NumberFormat(\"es-CO\",{style:\"currency\",currency:\"COP\",maximumFractionDigits:0}).format(n||0);// ================== RENDER ==================\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-(1500px) px-1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl font-extrabold text-center text-green-700 mb-10\",children:\"Bienvenido a tu Cartera\"}),alerta.mensaje&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 mb-6 rounded text-white text-center \".concat(alerta.tipo===\"error\"?\"bg-red-500\":\"bg-green-500\"),children:alerta.mensaje}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(SubirCartera,{recargar:cargarDatos})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-center gap-6 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-200 text-green-800 px-6 py-2 rounded-lg shadow text-center w-56 flex justify-center items-center gap-2\",children:[\"\\u2705 \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Vigentes:\"}),\" \",vigentes]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-200 text-yellow-800 px-6 py-2 rounded-lg shadow text-center w-56 flex justify-center items-center gap-2\",children:[\"\\u23F3 \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Pr\\xF3ximos:\"}),\" \",proximas]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-200 text-red-800 px-6 py-2 rounded-lg shadow text-center w-56 flex justify-center items-center gap-2\",children:[\"\\u26D4 \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Vencidas:\"}),\" \",vencidas]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-300 text-gray-800 px-6 py-2 rounded-lg shadow text-center w-56 flex justify-center items-center gap-2\",children:[\"\\u274C \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Anuladas:\"}),\" \",anuladas]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-200 p-2 rounded shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-yellow-800 font-bold text-xl\",children:gestionSi}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700\",children:\"Gesti\\xF3n = \\\"s\\xED\\\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-100 p-2 rounded shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-800 font-bold text-xl\",children:gestionTexto}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700\",children:\"Gesti\\xF3n con texto\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-rose-200 text-rose-800 px-6 py-2 rounded-lg shadow text-center w-64 flex flex-col items-center gap-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[\"\\u2796 \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Negativos:\"}),\" \",negativos]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[\"Total: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:formatCOP(negativosTotal)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 flex-wrap justify-center mb-8\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:borrando,onClick:()=>borrarPorFiltro(\"Vigentes\",esVigente),className:\"px-3 py-2 rounded \".concat(borrando?\"opacity-60\":\"\",\" bg-green-700 text-white hover:bg-green-800\"),children:\"Borrar Vigentes\"}),/*#__PURE__*/_jsx(\"button\",{disabled:borrando,onClick:()=>borrarPorFiltro(\"Próximos\",esProximo),className:\"px-3 py-2 rounded \".concat(borrando?\"opacity-60\":\"\",\" bg-yellow-600 text-white hover:bg-yellow-700\"),children:\"Borrar Pr\\xF3ximos\"}),/*#__PURE__*/_jsx(\"button\",{disabled:borrando,onClick:()=>borrarPorFiltro(\"Vencidas\",esVencida),className:\"px-3 py-2 rounded \".concat(borrando?\"opacity-60\":\"\",\" bg-red-700 text-white hover:bg-red-800\"),children:\"Borrar Vencidas\"}),/*#__PURE__*/_jsx(\"button\",{disabled:borrando,onClick:()=>borrarPorFiltro(\"Anuladas\",esAnulada),className:\"px-3 py-2 rounded \".concat(borrando?\"opacity-60\":\"\",\" bg-gray-700 text-white hover:bg-gray-800\"),children:\"Borrar Anuladas\"}),/*#__PURE__*/_jsx(\"button\",{disabled:borrando,onClick:()=>borrarPorFiltro('Gestión = \"sí\"',esGestionSi),className:\"px-3 py-2 rounded \".concat(borrando?\"opacity-60\":\"\",\" bg-amber-700 text-white hover:bg-amber-800\"),children:\"Borrar Gesti\\xF3n = \\\"s\\xED\\\"\"}),/*#__PURE__*/_jsx(\"button\",{disabled:borrando,onClick:()=>borrarPorFiltro(\"Gestión con texto\",esGestionTexto),className:\"px-3 py-2 rounded \".concat(borrando?\"opacity-60\":\"\",\" bg-blue-700 text-white hover:bg-blue-800\"),children:\"Borrar Gesti\\xF3n (texto)\"}),/*#__PURE__*/_jsx(\"button\",{disabled:borrando,onClick:()=>borrarPorFiltro(\"Negativos (valor/pendiente < 0\".concat(filterAseguradora!==\"todas\"?\", \".concat(filterAseguradora):\"\",\")\"),row=>esNegativo(row)&&(filterAseguradora===\"todas\"||String(row.aseguradora||\"\").toLowerCase().trim()===filterAseguradora.toLowerCase().trim())),className:\"px-3 py-2 rounded \".concat(borrando?\"opacity-60\":\"\",\" bg-rose-700 text-white hover:bg-rose-800\"),children:\"Borrar Negativos (filtro actual)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-10\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-600 hover:bg-green-700 text-white py-2 px-6 rounded-lg shadow-lg\",onClick:enviarAlertaWhatsapp,children:\"Enviar Alerta a WhatsApp\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mb-8 gap-4\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"border p-3 rounded-md shadow-md\",value:filterAseguradora,onChange:e=>setFilterAseguradora(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"todas\",children:\"Todas las Aseguradoras\"}),aseguradorasFijas.map((aseg,idx)=>/*#__PURE__*/_jsx(\"option\",{value:aseg,children:aseg},idx))]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar por nombre, p\\xF3liza o placa...\",className:\"border p-3 rounded-md flex-grow shadow-md w-96\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(filterStatus===\"todos\"?\"bg-blue-600\":\"bg-blue-500\",\" text-white py-2 px-4 rounded shadow\"),onClick:()=>setFilterStatus(\"todos\"),children:\"Todos\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded shadow\",onClick:()=>setFilterStatus(\"vigente\"),children:\"Vigentes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-yellow-400 hover:bg-yellow-500 text-black py-2 px-4 rounded shadow\",onClick:()=>setFilterStatus(\"proximo\"),children:\"Pr\\xF3ximos\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded shadow\",onClick:()=>setFilterStatus(\"vencido\"),children:\"Vencidos\"}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(filterStatus===\"negativos\"?\"bg-rose-500 text-white\":\"bg-rose-200 text-black\",\" hover:bg-rose-400 py-2 px-4 rounded shadow\"),onClick:()=>setFilterStatus(\"negativos\"),children:\"Negativos\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded shadow\",onClick:exportarExcel,children:\"Exportar a Excel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(filtroGestion===\"si\"?\"bg-yellow-500 text-white\":\"bg-yellow-200 text-black\",\" hover:bg-yellow-400 py-2 px-4 rounded shadow\"),onClick:()=>setFiltroGestion(filtroGestion===\"si\"?\"todos\":\"si\"),children:\"Gesti\\xF3n = \\\"s\\xED\\\"\"}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(filtroGestion===\"texto\"?\"bg-blue-500 text-white\":\"bg-blue-100 text-black\",\" hover:bg-blue-400 py-2 px-4 rounded shadow\"),onClick:()=>setFiltroGestion(filtroGestion===\"texto\"?\"todos\":\"texto\"),children:\"Gesti\\xF3n con texto\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded shadow\",onClick:()=>setFilterStatus(\"anulada\"),children:\"Anuladas\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"-translate-x-44\",children:/*#__PURE__*/_jsxs(\"table\",{className:\" w-full border-collapse rounded-lg text-base shadow-lg\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-300\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Aseguradora\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Documento\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Asesor\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Placa\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Ramo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"P\\xF3liza\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Valor\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Fecha Emisi\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Fecha Vencimiento\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Recaudada\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Acciones\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2 border text-center\",children:\"Gesti\\xF3n\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.filter(row=>{const term=searchTerm.toLowerCase();const cumpleAseguradora=filterAseguradora===\"todas\"||String(row.aseguradora||\"\").toLowerCase().trim()===filterAseguradora.toLowerCase().trim();const coincideBusqueda=term===\"\"||String(row.nombre||\"\").toLowerCase().includes(term)||String(row.cliente||\"\").toLowerCase().includes(term)||String(row.producto||\"\").toLowerCase().includes(term)||String(row.poliza||\"\").toLowerCase().includes(term)||String(row.documento||\"\").toLowerCase().includes(term)||String(row.placa||\"\").toLowerCase().includes(term);if(!cumpleAseguradora||!coincideBusqueda)return false;const dias=calcularDiasDesdeEmision(row[\"fecha_emision\"]);const gestion=(row.gestion||\"\").toLowerCase().trim();const anulada=(row.anulada||\"\").toLowerCase().trim();if(filtroGestion===\"si\"&&gestion!==\"sí\")return false;if(filtroGestion===\"texto\"&&(gestion===\"\"||gestion===\"si\"))return false;if(filterStatus===\"vigente\")return dias<25&&anulada!==\"sí\";if(filterStatus===\"proximo\")return dias>=25&&dias<=30&&anulada!==\"sí\";if(filterStatus===\"vencido\")return dias>31&&gestion!==\"si\"&&anulada!==\"sí\";if(filterStatus===\"anulada\")return anulada===\"sí\";if(filterStatus===\"negativos\")return esNegativo(row);return true;}).map(row=>{var _row$anulada;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:getRowColor(row[\"fecha_emision\"],row[\"recaudada\"],row[\"anulada\"])},children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2 border text-center\",children:row.aseguradora}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2 border text-center\",children:row.nombre}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2 border text-center\",children:row.documento}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2 border text-center\",children:row.asesor}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2 border text-center\",children:row.placa}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2 border text-center\",children:row.ramo}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2 border text-center\",children:row.poliza}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-2 py-2 border text-center\",children:[\"$\",Number(parseMoney(row.valor)).toLocaleString(\"es-CO\")]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1 border text-center\",children:row.fecha_emision}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1 border text-center\",children:row.fecha_vencimiento}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1 border text-center\",children:row.recaudada}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1 border text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 justify-center flex-wrap\",children:[((_row$anulada=row.anulada)===null||_row$anulada===void 0?void 0:_row$anulada.toLowerCase().trim())===\"sí\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>confirmarEliminacion(row.id),className:\"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded\",children:\"Confirmar Anulaci\\xF3n\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const next=openRowId===row.id?null:row.id;setOpenRowId(next);setSelectedPoliza(row.poliza);setSelectedDocId(row.id);setRowRecaudada(row.recaudada||\"\");setGestionText(row.gestion||\"\");},className:\"bg-blue-500 hover:bg-blue-700 text-white px-3 py-1 rounded\",children:openRowId===row.id?\"Cerrar\":\"Gestionar\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1 border text-center\",children:row.gestion||/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"Sin gesti\\xF3n\"})})]}),openRowId===row.id&&/*#__PURE__*/_jsx(\"tr\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:12,className:\"px-4 py-4 border\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3 sticky top-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700\",children:[\"Gestionando p\\xF3liza \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:row.poliza}),\" \\xB7 \",row.aseguradora]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-(1fr_320px)  gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-4\",children:\"Recaudada\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full border p-2 rounded\",value:rowRecaudada,onChange:e=>setRowRecaudada(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"S\\xED\",children:\"S\\xED\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-4\",children:\"Gesti\\xF3n / Nota\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border p-2 rounded min-h-[90px]\",rows:\"4\",placeholder:\"Escribe tu gesti\\xF3n aqu\\xED...\",value:gestionText,onChange:e=>setGestionText(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\",onClick:async()=>{if(!selectedDocId)return window.alert(\"No se encontró el ID del documento.\");try{const valorGestion=rowRecaudada===\"Sí\"?\"sí\":gestionText;await updateDoc(doc(db,\"cartera\",selectedDocId),{recaudada:rowRecaudada,gestion:valorGestion});await cargarDatos();setOpenRowId(null);setAlerta({tipo:\"ok\",mensaje:\"Gestión guardada correctamente\"});setTimeout(()=>setAlerta({tipo:\"\",mensaje:\"\"}),2500);}catch(e){console.error(\"Error al guardar gestión:\",e);setAlerta({tipo:\"error\",mensaje:\"Hubo un error al guardar la gestión.\"});setTimeout(()=>setAlerta({tipo:\"\",mensaje:\"\"}),3000);}},children:\"Guardar Gesti\\xF3n\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-white border px-2 py-1 rounded hover:bg-gray-100\",onClick:()=>setOpenRowId(null),children:\"Cancelar\"})]})]})})})]},row.id);})})]})})]});};export default VerCartera;","map":{"version":3,"names":["React","useEffect","useState","Fragment","db","XLSX","saveAs","collection","getDocs","updateDoc","doc","deleteDoc","writeBatch","SubirCartera","jsx","_jsx","jsxs","_jsxs","aseguradorasFijas","VerCartera","data","setData","searchTerm","setSearchTerm","filterStatus","setFilterStatus","filterAseguradora","setFilterAseguradora","alerta","setAlerta","tipo","mensaje","openRowId","setOpenRowId","selectedPoliza","setSelectedPoliza","selectedDocId","setSelectedDocId","gestionText","setGestionText","rowRecaudada","setRowRecaudada","vigentes","setVigentes","proximas","setProximas","vencidas","setVencidas","anuladas","setAnuladas","gestionSi","setGestionSi","gestionTexto","setGestionTexto","filtroGestion","setFiltroGestion","negativos","setNegativos","negativosTotal","setNegativosTotal","borrando","setBorrando","calcularDiasDesdeEmision","fechaEmision","partes","includes","split","reverse","hoy","Date","fecha","Math","floor","getRowColor","recaudada","anulada","toLowerCase","trim","dias","getMontoRaw","row","_ref","_row$valor","keys","k","Object","prototype","hasOwnProperty","call","valor","pendiente","parseMoney","v","s","String","replace","parenNeg","test","last","lastIndexOf","slice","hadMinus","num","parseFloat","isNaN","abs","getMontoNumber","esNegativo","esVigente","g","gestion","a","f","fecha_emision","d","esProximo","esVencida","esAnulada","esGestionSi","esGestionTexto","cargarDatos","snap","documentos","docs","map","_objectSpread","id","anuladasValidas","filter","tieneMinimos","poliza","aseguradora","nombre","dataFiltrada","length","negRows","reduce","acc","r","exportarExcel","wb","utils","book_new","wsData","Aseguradora","Nombre","Asesor","asesor","Placa","placa","Ramo","ramo","Poliza","fecha_vencimiento","Valor","Recaudada","Observacion","observacion","ws","json_to_sheet","book_append_sheet","excelBuffer","write","bookType","type","blob","Blob","enviarAlertaWhatsapp","numeroDestino","proximasVencidas","window","alert","p","concat","join","cuerpo","fetch","method","headers","body","JSON","stringify","to","message","ok","text","e","borrarPorFiltro","nombreGrupo","predicado","ok1","confirm","ok2","prompt","toUpperCase","objetivos","total","i","chunk","batch","forEach","delete","commit","Promise","setTimeout","console","error","confirmarEliminacion","formatCOP","n","Intl","NumberFormat","style","currency","maximumFractionDigits","format","className","children","recargar","disabled","onClick","value","onChange","target","aseg","idx","placeholder","term","cumpleAseguradora","coincideBusqueda","cliente","producto","documento","_row$anulada","backgroundColor","Number","toLocaleString","next","colSpan","rows","valorGestion"],"sources":["C:/Users/HUAWEI/carpeta limpia para cargar/src/VerCartera.jsx"],"sourcesContent":["import React, { useEffect, useState, Fragment } from \"react\";\r\nimport { db } from \"./firebase\";\r\nimport * as XLSX from \"xlsx\";\r\nimport { saveAs } from \"file-saver\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  updateDoc,\r\n  doc,\r\n  deleteDoc,\r\n  writeBatch,\r\n} from \"firebase/firestore\";\r\nimport SubirCartera from \"./SubirCartera\";\r\n\r\nconst aseguradorasFijas = [\r\n  \"Allianz\",\"Sura\",\"Estado\",\"Previsora\",\"Mundial\",\"Solidaria\",\"Axa\",\"Mafre\",\"Sbs\",\"Hdi\",\r\n];\r\n\r\nconst VerCartera = () => {\r\n  // --- UI / estado general ---\r\n  const [data, setData] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [filterStatus, setFilterStatus] = useState(\"todos\");\r\n  const [filterAseguradora, setFilterAseguradora] = useState(\"todas\");\r\n  const [alerta, setAlerta] = useState({ tipo: \"\", mensaje: \"\" });\r\n\r\n  // --- Gestión inline por fila ---\r\n  const [openRowId, setOpenRowId] = useState(null);\r\n  const [selectedPoliza, setSelectedPoliza] = useState(null);\r\n  const [selectedDocId, setSelectedDocId] = useState(null);\r\n  const [gestionText, setGestionText] = useState(\"\");\r\n  const [rowRecaudada, setRowRecaudada] = useState(\"\");\r\n\r\n  // --- Contadores ---\r\n  const [vigentes, setVigentes] = useState(0);\r\n  const [proximas, setProximas] = useState(0);\r\n  const [vencidas, setVencidas] = useState(0);\r\n  const [anuladas, setAnuladas] = useState(0);\r\n  const [gestionSi, setGestionSi] = useState(0);\r\n  const [gestionTexto, setGestionTexto] = useState(0);\r\n  const [filtroGestion, setFiltroGestion] = useState(\"todos\");\r\n\r\n  // --- Negativos ---\r\n  const [negativos, setNegativos] = useState(0);\r\n  const [negativosTotal, setNegativosTotal] = useState(0);\r\n\r\n  // --- Estado de borrado masivo ---\r\n  const [borrando, setBorrando] = useState(false);\r\n\r\n  useEffect(() => { setFiltroGestion(\"todos\"); }, [filterStatus, filterAseguradora]);\r\n\r\n  // ================== HELPERS ==================\r\n\r\n  const calcularDiasDesdeEmision = (fechaEmision) => {\r\n    if (!fechaEmision) return 0;\r\n    let partes = fechaEmision.includes(\"-\")\r\n      ? fechaEmision.split(\"-\")\r\n      : fechaEmision.split(\"/\").reverse();\r\n    const hoy = new Date();\r\n    const fecha = new Date(+partes[0], +partes[1]-1, +partes[2]);\r\n    return Math.floor((hoy - fecha) / (1000*60*60*24));\r\n  };\r\n\r\n  const getRowColor = (fechaEmision, recaudada, anulada) => {\r\n    if ((anulada || \"\").toLowerCase().trim() === \"sí\") return \"#e5e7eb\";\r\n    const dias = calcularDiasDesdeEmision(fechaEmision);\r\n    if ((recaudada || \"\").toLowerCase() === \"sí\") return \"#bfdbfe\";\r\n    if (dias >= 31) return \"#fecaca\";\r\n    if (dias >= 25) return \"#fef08a\";\r\n    return \"#bbf7d0\";\r\n  };\r\n\r\n  // --- MONTO (lee de 'valor' y, si no, de 'pendiente') ---\r\n  const getMontoRaw = (row) => {\r\n    const keys = [\"valor\",\"Valor\",\"pendiente\",\"Pendiente\",\"PENDIENTE\"];\r\n    for (const k of keys) if (row && Object.prototype.hasOwnProperty.call(row, k)) return row[k];\r\n    return row?.valor ?? row?.pendiente ?? \"\";\r\n  };\r\n\r\n  // Parser ULTRA robusto (maneja -, −, (xxxx), 1.234,56 / 1,234.56 / $ 1.234, etc.)\r\n  const parseMoney = (v) => {\r\n    let s = String(v ?? \"\").trim();\r\n    if (!s) return 0;\r\n\r\n    // normaliza guiones raros y NBSP\r\n    s = s.replace(/[\\u2010-\\u2015\\u2212]/g, \"-\").replace(/\\u00A0/g, \"\");\r\n\r\n    // negativo por paréntesis\r\n    const parenNeg = /^\\(.*\\)$/.test(s);\r\n\r\n    // deja solo dígitos, separadores y signo\r\n    s = s.replace(/[^\\d.,-]/g, \"\");\r\n\r\n    // si hay . y , asumimos formato EU (1.234,56)\r\n    if (s.includes(\".\") && s.includes(\",\")) {\r\n      s = s.replace(/\\./g, \"\").replace(/,/g, \".\");\r\n    } else {\r\n      if (s.includes(\",\") && !s.includes(\".\")) {\r\n        const last = s.lastIndexOf(\",\");\r\n        s = s.slice(0, last).replace(/,/g, \"\") + \".\" + s.slice(last + 1);\r\n      } else if (s.includes(\".\")) {\r\n        const last = s.lastIndexOf(\".\");\r\n        s = s.slice(0, last).replace(/\\./g, \"\") + \".\" + s.slice(last + 1);\r\n      }\r\n    }\r\n\r\n    const hadMinus = /-/.test(s);\r\n    s = s.replace(/-/g, \"\");\r\n\r\n    let num = parseFloat(s);\r\n    if (isNaN(num)) num = 0;\r\n\r\n    if (hadMinus || parenNeg) num = -Math.abs(num);\r\n    return num;\r\n  };\r\n\r\n  const getMontoNumber = (row) => parseMoney(getMontoRaw(row));\r\n  const esNegativo = (row) => getMontoNumber(row) < 0;\r\n\r\n  // Categorizadores\r\n  const esVigente = (row) => {\r\n    const g = (row.gestion || \"\").toLowerCase().trim();\r\n    const a = (row.anulada || \"\").toLowerCase().trim();\r\n    const f = row.fecha_emision;\r\n    if (!f || g === \"sí\" || a === \"sí\") return false;\r\n    const d = calcularDiasDesdeEmision(f);\r\n    return d < 25;\r\n  };\r\n  const esProximo = (row) => {\r\n    const g = (row.gestion || \"\").toLowerCase().trim();\r\n    const a = (row.anulada || \"\").toLowerCase().trim();\r\n    const f = row.fecha_emision;\r\n    if (!f || g === \"sí\" || a === \"sí\") return false;\r\n    const d = calcularDiasDesdeEmision(f);\r\n    return d >= 25 && d <= 30;\r\n  };\r\n  const esVencida = (row) => {\r\n    const g = (row.gestion || \"\").toLowerCase().trim();\r\n    const a = (row.anulada || \"\").toLowerCase().trim();\r\n    const f = row.fecha_emision;\r\n    if (!f || g === \"sí\" || a === \"sí\") return false;\r\n    const d = calcularDiasDesdeEmision(f);\r\n    return d >= 31;\r\n  };\r\n  const esAnulada = (row) => (row.anulada || \"\").toLowerCase().trim() === \"sí\";\r\n  const esGestionSi = (row) => {\r\n    const g = (row.gestion || \"\").toLowerCase().trim();\r\n    return g === \"sí\" || g === \"si\";\r\n  };\r\n  const esGestionTexto = (row) => {\r\n    const g = (row.gestion || \"\").toLowerCase().trim();\r\n    return g !== \"\" && g !== \"si\" && g !== \"sí\";\r\n  };\r\n\r\n  // ================== CARGA DE DATOS ==================\r\n  const cargarDatos = async () => {\r\n    const snap = await getDocs(collection(db, \"cartera\"));\r\n    const documentos = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    const anuladasValidas = documentos.filter((d) => {\r\n      const anulada = (d.anulada || \"\").toLowerCase().trim();\r\n      const tieneMinimos = d.poliza && d.aseguradora && d.nombre;\r\n      return !(anulada === \"sí\" && !tieneMinimos);\r\n    });\r\n    setData(anuladasValidas);\r\n  };\r\n\r\n  useEffect(() => { cargarDatos(); }, []);\r\n\r\n  // ================== CONTADORES ==================\r\n  useEffect(() => {\r\n    const dataFiltrada =\r\n      filterAseguradora === \"todas\"\r\n        ? data\r\n        : data.filter(\r\n            (row) =>\r\n              (row.aseguradora || \"\").toLowerCase().trim() ===\r\n              filterAseguradora.toLowerCase()\r\n          );\r\n\r\n    setVigentes(dataFiltrada.filter(esVigente).length);\r\n    setProximas(dataFiltrada.filter(esProximo).length);\r\n    setVencidas(dataFiltrada.filter(esVencida).length);\r\n    setAnuladas(dataFiltrada.filter(esAnulada).length);\r\n    setGestionSi(dataFiltrada.filter(esGestionSi).length);\r\n    setGestionTexto(dataFiltrada.filter(esGestionTexto).length);\r\n\r\n    const negRows = dataFiltrada.filter(esNegativo);\r\n    setNegativos(negRows.length);\r\n    setNegativosTotal(negRows.reduce((acc, r) => acc + getMontoNumber(r), 0));\r\n  }, [data, filterAseguradora]);\r\n\r\n  // ================== EXPORTAR ==================\r\n  const exportarExcel = () => {\r\n    const wb = XLSX.utils.book_new();\r\n    const wsData = data.map((row) => ({\r\n      Aseguradora: row.aseguradora,\r\n      Nombre: row.nombre,\r\n      Asesor: row.asesor,\r\n      Placa: row.placa,\r\n      Ramo: row.ramo,\r\n      Poliza: row.poliza,\r\n      \"Fecha Emision\": row.fecha_emision,\r\n      \"Fecha Vencimiento\": row.fecha_vencimiento,\r\n      Valor: row.valor,\r\n      Recaudada: row.recaudada,\r\n      Observacion: row.observacion,\r\n    }));\r\n    const ws = XLSX.utils.json_to_sheet(wsData);\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Cartera\");\r\n    const excelBuffer = XLSX.write(wb, { bookType: \"xlsx\", type: \"array\" });\r\n    const blob = new Blob([excelBuffer], { type: \"application/octet-stream\" });\r\n    saveAs(blob, \"cartera_exportada.xlsx\");\r\n  };\r\n\r\n  // ================== WHATSAPP ==================\r\n  const enviarAlertaWhatsapp = async () => {\r\n    const numeroDestino = \"whatsapp:+573242139020\";\r\n    const proximasVencidas = data.filter((row) => {\r\n      const dias = calcularDiasDesdeEmision(row[\"fecha_emision\"]);\r\n      return dias >= 25 && dias <= 30;\r\n    });\r\n    if (!proximasVencidas.length) return window.alert(\"No hay pólizas próximas a vencer.\");\r\n    const mensaje = proximasVencidas.map((p) => `• Póliza: ${p.poliza}, Emisión: ${p.fecha_emision}`).join(\"\\n\");\r\n    const cuerpo = `⚠️ *ALERTA DE CARTERA PRÓXIMA A VENCER* ⚠️\\n\\n${mensaje}`;\r\n    try {\r\n      const r = await fetch(\"http://localhost:3000/send-alert\", {\r\n        method: \"POST\", headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ to: numeroDestino, message: cuerpo }),\r\n      });\r\n      if (!r.ok) return window.alert(\"Error: \" + (await r.text()));\r\n      window.alert(\"¡Alerta enviada exitosamente!\");\r\n    } catch (e) { window.alert(\"Error de red: \" + e.message); }\r\n  };\r\n\r\n  // ================== BORRADOS POR CONTADOR ==================\r\n  const borrarPorFiltro = async (nombreGrupo, predicado) => {\r\n    const ok1 = window.confirm(`⚠️ Vas a BORRAR definitivamente las pólizas del grupo \"${nombreGrupo}\". ¿Continuar?`);\r\n    if (!ok1) return;\r\n    const ok2 = (window.prompt(`Escribe BORRAR para confirmar el borrado de \"${nombreGrupo}\".`) || \"\").toUpperCase();\r\n    if (ok2 !== \"BORRAR\") return;\r\n\r\n    try {\r\n      setBorrando(true);\r\n      const snap = await getDocs(collection(db, \"cartera\"));\r\n      const objetivos = snap.docs.filter((d) => predicado({ id: d.id, ...d.data() }));\r\n      if (!objetivos.length) {\r\n        setBorrando(false);\r\n        return window.alert(`No hay documentos en \"${nombreGrupo}\" para borrar.`);\r\n      }\r\n      let total = 0;\r\n      for (let i = 0; i < objetivos.length; i += 450) {\r\n        const chunk = objetivos.slice(i, i + 450);\r\n        const batch = writeBatch(db);\r\n        chunk.forEach((d) => batch.delete(doc(db, \"cartera\", d.id)));\r\n        await batch.commit();\r\n        total += chunk.length;\r\n        await new Promise((r) => setTimeout(r, 25));\r\n      }\r\n      await cargarDatos();\r\n      setAlerta({ tipo: \"ok\", mensaje: `Borradas ${total} pólizas del grupo \"${nombreGrupo}\".` });\r\n      setTimeout(() => setAlerta({ tipo: \"\", mensaje: \"\" }), 3000);\r\n    } catch (e) {\r\n      console.error(e);\r\n      setAlerta({ tipo: \"error\", mensaje: `No se pudo borrar \"${nombreGrupo}\".` });\r\n      setTimeout(() => setAlerta({ tipo: \"\", mensaje: \"\" }), 3500);\r\n    } finally {\r\n      setBorrando(false);\r\n    }\r\n  };\r\n\r\n  const confirmarEliminacion = async (id) => {\r\n    if (!window.confirm(\"¿Deseas eliminar esta póliza anulada permanentemente?\")) return;\r\n    await deleteDoc(doc(db, \"cartera\", id));\r\n    window.alert(\"Póliza eliminada definitivamente.\");\r\n    cargarDatos();\r\n  };\r\n\r\n  const formatCOP = (n) =>\r\n    new Intl.NumberFormat(\"es-CO\", { style: \"currency\", currency: \"COP\", maximumFractionDigits: 0 }).format(n || 0);\r\n\r\n  // ================== RENDER ==================\r\n  return (\r\n    <div className=\"w-full max-w-(1500px) px-1\">\r\n      \r\n      \r\n      <h1 className=\"text-5xl font-extrabold text-center text-green-700 mb-10\">Bienvenido a tu Cartera</h1>\r\n\r\n      {alerta.mensaje && (\r\n        <div className={`p-4 mb-6 rounded text-white text-center ${alerta.tipo === \"error\" ? \"bg-red-500\" : \"bg-green-500\"}`}>\r\n          {alerta.mensaje}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex justify-center mb-6\">\r\n        <SubirCartera recargar={cargarDatos} />\r\n      </div>\r\n\r\n      {/* Resumen */}\r\n      <div className=\"flex flex-wrap justify-center gap-6 mb-4\">\r\n        <div className=\"bg-green-200 text-green-800 px-6 py-2 rounded-lg shadow text-center w-56 flex justify-center items-center gap-2\">\r\n          ✅ <span className=\"font-bold\">Vigentes:</span> {vigentes}\r\n        </div>\r\n        <div className=\"bg-yellow-200 text-yellow-800 px-6 py-2 rounded-lg shadow text-center w-56 flex justify-center items-center gap-2\">\r\n          ⏳ <span className=\"font-bold\">Próximos:</span> {proximas}\r\n        </div>\r\n        <div className=\"bg-red-200 text-red-800 px-6 py-2 rounded-lg shadow text-center w-56 flex justify-center items-center gap-2\">\r\n          ⛔ <span className=\"font-bold\">Vencidas:</span> {vencidas}\r\n        </div>\r\n        <div className=\"bg-gray-300 text-gray-800 px-6 py-2 rounded-lg shadow text-center w-56 flex justify-center items-center gap-2\">\r\n          ❌ <span className=\"font-bold\">Anuladas:</span> {anuladas}\r\n        </div>\r\n        <div className=\"bg-yellow-200 p-2 rounded shadow\">\r\n          <div className=\"text-yellow-800 font-bold text-xl\">{gestionSi}</div>\r\n          <div className=\"text-gray-700\">Gestión = \"sí\"</div>\r\n        </div>\r\n        <div className=\"bg-blue-100 p-2 rounded shadow\">\r\n          <div className=\"text-blue-800 font-bold text-xl\">{gestionTexto}</div>\r\n          <div className=\"text-gray-700\">Gestión con texto</div>\r\n        </div>\r\n\r\n        {/* Negativos */}\r\n        <div className=\"bg-rose-200 text-rose-800 px-6 py-2 rounded-lg shadow text-center w-64 flex flex-col items-center gap-1\">\r\n          <div className=\"flex items-center gap-2\">➖ <span className=\"font-bold\">Negativos:</span> {negativos}</div>\r\n          <div className=\"text-sm\">Total: <span className=\"font-semibold\">{formatCOP(negativosTotal)}</span></div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Borradores */}\r\n      <div className=\"flex gap-2 flex-wrap justify-center mb-8\">\r\n        <button disabled={borrando} onClick={() => borrarPorFiltro(\"Vigentes\", esVigente)} className={`px-3 py-2 rounded ${borrando?\"opacity-60\":\"\"} bg-green-700 text-white hover:bg-green-800`}>Borrar Vigentes</button>\r\n        <button disabled={borrando} onClick={() => borrarPorFiltro(\"Próximos\", esProximo)} className={`px-3 py-2 rounded ${borrando?\"opacity-60\":\"\"} bg-yellow-600 text-white hover:bg-yellow-700`}>Borrar Próximos</button>\r\n        <button disabled={borrando} onClick={() => borrarPorFiltro(\"Vencidas\", esVencida)} className={`px-3 py-2 rounded ${borrando?\"opacity-60\":\"\"} bg-red-700 text-white hover:bg-red-800`}>Borrar Vencidas</button>\r\n        <button disabled={borrando} onClick={() => borrarPorFiltro(\"Anuladas\", esAnulada)} className={`px-3 py-2 rounded ${borrando?\"opacity-60\":\"\"} bg-gray-700 text-white hover:bg-gray-800`}>Borrar Anuladas</button>\r\n        <button disabled={borrando} onClick={() => borrarPorFiltro('Gestión = \"sí\"', esGestionSi)} className={`px-3 py-2 rounded ${borrando?\"opacity-60\":\"\"} bg-amber-700 text-white hover:bg-amber-800`}>Borrar Gestión = \"sí\"</button>\r\n        <button disabled={borrando} onClick={() => borrarPorFiltro(\"Gestión con texto\", esGestionTexto)} className={`px-3 py-2 rounded ${borrando?\"opacity-60\":\"\"} bg-blue-700 text-white hover:bg-blue-800`}>Borrar Gestión (texto)</button>\r\n        {/* Negativos respetando filtro de aseguradora */}\r\n        <button\r\n          disabled={borrando}\r\n          onClick={() =>\r\n            borrarPorFiltro(\r\n              `Negativos (valor/pendiente < 0${filterAseguradora!==\"todas\" ? `, ${filterAseguradora}` : \"\"})`,\r\n              (row) =>\r\n                esNegativo(row) &&\r\n                (filterAseguradora === \"todas\" ||\r\n                  String(row.aseguradora || \"\").toLowerCase().trim() ===\r\n                    filterAseguradora.toLowerCase().trim())\r\n            )\r\n          }\r\n          className={`px-3 py-2 rounded ${borrando?\"opacity-60\":\"\"} bg-rose-700 text-white hover:bg-rose-800`}\r\n        >\r\n          Borrar Negativos (filtro actual)\r\n        </button>\r\n      </div>\r\n\r\n      {/* WhatsApp */}\r\n      <div className=\"flex justify-center mb-10\">\r\n        <button className=\"bg-green-600 hover:bg-green-700 text-white py-2 px-6 rounded-lg shadow-lg\" onClick={enviarAlertaWhatsapp}>\r\n          Enviar Alerta a WhatsApp\r\n        </button>\r\n      </div>\r\n\r\n      {/* Filtros superiores */}\r\n      <div className=\"flex justify-center mb-8 gap-4\">\r\n        <select className=\"border p-3 rounded-md shadow-md\" value={filterAseguradora} onChange={(e) => setFilterAseguradora(e.target.value)}>\r\n          <option value=\"todas\">Todas las Aseguradoras</option>\r\n          {aseguradorasFijas.map((aseg, idx) => <option key={idx} value={aseg}>{aseg}</option>)}\r\n        </select>\r\n\r\n        <input type=\"text\" placeholder=\"Buscar por nombre, póliza o placa...\" className=\"border p-3 rounded-md flex-grow shadow-md w-96\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />\r\n\r\n        <button className={`${filterStatus===\"todos\"?\"bg-blue-600\":\"bg-blue-500\"} text-white py-2 px-4 rounded shadow`} onClick={() => setFilterStatus(\"todos\")}>Todos</button>\r\n        <button className=\"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded shadow\" onClick={() => setFilterStatus(\"vigente\")}>Vigentes</button>\r\n        <button className=\"bg-yellow-400 hover:bg-yellow-500 text-black py-2 px-4 rounded shadow\" onClick={() => setFilterStatus(\"proximo\")}>Próximos</button>\r\n        <button className=\"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded shadow\" onClick={() => setFilterStatus(\"vencido\")}>Vencidos</button>\r\n        <button className={`${filterStatus===\"negativos\"?\"bg-rose-500 text-white\":\"bg-rose-200 text-black\"} hover:bg-rose-400 py-2 px-4 rounded shadow`} onClick={() => setFilterStatus(\"negativos\")}>Negativos</button>\r\n\r\n        <button className=\"bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded shadow\" onClick={exportarExcel}>Exportar a Excel</button>\r\n\r\n        <button className={`${filtroGestion===\"si\"?\"bg-yellow-500 text-white\":\"bg-yellow-200 text-black\"} hover:bg-yellow-400 py-2 px-4 rounded shadow`} onClick={() => setFiltroGestion(filtroGestion===\"si\"?\"todos\":\"si\")}>Gestión = \"sí\"</button>\r\n        <button className={`${filtroGestion===\"texto\"?\"bg-blue-500 text-white\":\"bg-blue-100 text-black\"} hover:bg-blue-400 py-2 px-4 rounded shadow`} onClick={() => setFiltroGestion(filtroGestion===\"texto\"?\"todos\":\"texto\")}>Gestión con texto</button>\r\n        <button className=\"bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded shadow\" onClick={() => setFilterStatus(\"anulada\")}>Anuladas</button>\r\n      </div>\r\n\r\n      {/* Tabla */}\r\n      <div className=\"-translate-x-44\">\r\n        <table className=\" w-full border-collapse rounded-lg text-base shadow-lg\">\r\n          <thead className=\"bg-gray-300\">\r\n            <tr>\r\n              <th className=\"px-2 py-2 border text-center\">Aseguradora</th>\r\n              <th className=\"px-2 py-2 border text-center\">Nombre</th>\r\n              <th className=\"px-2 py-2 border text-center\">Documento</th>\r\n              <th className=\"px-2 py-2 border text-center\">Asesor</th>\r\n              <th className=\"px-2 py-2 border text-center\">Placa</th>\r\n              <th className=\"px-2 py-2 border text-center\">Ramo</th>\r\n              <th className=\"px-2 py-2 border text-center\">Póliza</th>\r\n              <th className=\"px-2 py-2 border text-center\">Valor</th>\r\n              <th className=\"px-2 py-2 border text-center\">Fecha Emisión</th>\r\n              <th className=\"px-2 py-2 border text-center\">Fecha Vencimiento</th>\r\n              <th className=\"px-2 py-2 border text-center\">Recaudada</th>\r\n              <th className=\"px-2 py-2 border text-center\">Acciones</th>\r\n              <th className=\"px-2 py-2 border text-center\">Gestión</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {data\r\n              .filter((row) => {\r\n                const term = searchTerm.toLowerCase();\r\n                const cumpleAseguradora =\r\n                  filterAseguradora === \"todas\" ||\r\n                  String(row.aseguradora || \"\").toLowerCase().trim() === filterAseguradora.toLowerCase().trim();\r\n                const coincideBusqueda =\r\n                  term === \"\" ||\r\n                  String(row.nombre || \"\").toLowerCase().includes(term) ||\r\n                  String(row.cliente || \"\").toLowerCase().includes(term) ||\r\n                  String(row.producto || \"\").toLowerCase().includes(term) ||\r\n                  String(row.poliza || \"\").toLowerCase().includes(term) ||\r\n                  String(row.documento || \"\").toLowerCase().includes(term) ||\r\n                  String(row.placa || \"\").toLowerCase().includes(term);\r\n                if (!cumpleAseguradora || !coincideBusqueda) return false;\r\n\r\n                const dias = calcularDiasDesdeEmision(row[\"fecha_emision\"]);\r\n                const gestion = (row.gestion || \"\").toLowerCase().trim();\r\n                const anulada = (row.anulada || \"\").toLowerCase().trim();\r\n\r\n                if (filtroGestion === \"si\" && gestion !== \"sí\") return false;\r\n                if (filtroGestion === \"texto\" && (gestion === \"\" || gestion === \"si\")) return false;\r\n\r\n                if (filterStatus === \"vigente\") return dias < 25 && anulada !== \"sí\";\r\n                if (filterStatus === \"proximo\") return dias >= 25 && dias <= 30 && anulada !== \"sí\";\r\n                if (filterStatus === \"vencido\") return dias > 31 && gestion !== \"si\" && anulada !== \"sí\";\r\n                if (filterStatus === \"anulada\") return anulada === \"sí\";\r\n                if (filterStatus === \"negativos\") return esNegativo(row);\r\n\r\n                return true;\r\n              })\r\n              .map((row) => (\r\n                <Fragment key={row.id}>\r\n                  {/* Fila principal */}\r\n                  <tr style={{ backgroundColor: getRowColor(row[\"fecha_emision\"], row[\"recaudada\"], row[\"anulada\"]) }}>\r\n                    <td className=\"px-2 py-2 border text-center\">{row.aseguradora}</td>\r\n                    <td className=\"px-2 py-2 border text-center\">{row.nombre}</td>\r\n                    <td className=\"px-2 py-2 border text-center\">{row.documento}</td>\r\n                    <td className=\"px-2 py-2 border text-center\">{row.asesor}</td>\r\n                    <td className=\"px-2 py-2 border text-center\">{row.placa}</td>\r\n                    <td className=\"px-2 py-2 border text-center\">{row.ramo}</td>\r\n                    <td className=\"px-2 py-2 border text-center\">{row.poliza}</td>\r\n                    <td className=\"px-2 py-2 border text-center\">\r\n                      ${Number(parseMoney(row.valor)).toLocaleString(\"es-CO\")}\r\n                    </td>\r\n                    <td className=\"px-2 py-1 border text-center\">{row.fecha_emision}</td>\r\n                    <td className=\"px-2 py-1 border text-center\">{row.fecha_vencimiento}</td>\r\n                    <td className=\"px-2 py-1 border text-center\">{row.recaudada}</td>\r\n\r\n                    {/* Acciones */}\r\n                    <td className=\"px-2 py-1 border text-center\">\r\n                      <div className=\"flex gap-2 justify-center flex-wrap\">\r\n                        {row.anulada?.toLowerCase().trim() === \"sí\" && (\r\n                          <button onClick={() => confirmarEliminacion(row.id)} className=\"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded\">\r\n                            Confirmar Anulación\r\n                          </button>\r\n                        )}\r\n                        <button\r\n                          onClick={() => {\r\n                            const next = openRowId === row.id ? null : row.id;\r\n                            setOpenRowId(next);\r\n                            setSelectedPoliza(row.poliza);\r\n                            setSelectedDocId(row.id);\r\n                            setRowRecaudada(row.recaudada || \"\");\r\n                            setGestionText(row.gestion || \"\");\r\n                          }}\r\n                          className=\"bg-blue-500 hover:bg-blue-700 text-white px-3 py-1 rounded\"\r\n                        >\r\n                          {openRowId === row.id ? \"Cerrar\" : \"Gestionar\"}\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n\r\n                    {/* Columna Gestión */}\r\n                    <td className=\"px-2 py-1 border text-center\">\r\n                      {row.gestion || <span className=\"text-gray-400\">Sin gestión</span>}\r\n                    </td>\r\n                  </tr>\r\n\r\n                  {/* Panel inline de gestión */}\r\n                  {openRowId === row.id && (\r\n                    <tr className=\"bg-gray-50\">\r\n                      <td colSpan={12} className=\"px-4 py-4 border\">\r\n                        <div className=\"flex flex-col gap-3 sticky top-6\">\r\n                          <div className=\"text-sm text-gray-700\">\r\n                            Gestionando póliza <span className=\"font-semibold\">{row.poliza}</span> · {row.aseguradora}\r\n                          </div>\r\n\r\n                          <div className=\"grid grid-cols-(1fr_320px)  gap-6\">\r\n                            <div className=\"md:col-span-1\">\r\n                              <label className=\"block text-xs text-gray-600 mb-4\">Recaudada</label>\r\n                              <select className=\"w-full border p-2 rounded\" value={rowRecaudada} onChange={(e) => setRowRecaudada(e.target.value)}>\r\n                                <option value=\"\">Selecciona...</option>\r\n                                <option value=\"Sí\">Sí</option>\r\n                              </select>\r\n                            </div>\r\n\r\n                            <div className=\"md:col-span-2\">\r\n                              <label className=\"block text-xs text-gray-600 mb-4\">Gestión / Nota</label>\r\n                              <textarea\r\n                                className=\"w-full border p-2 rounded min-h-[90px]\"\r\n                                rows=\"4\"\r\n                                placeholder=\"Escribe tu gestión aquí...\"\r\n                                value={gestionText}\r\n                                onChange={(e) => setGestionText(e.target.value)}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                              className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n                              onClick={async () => {\r\n                                if (!selectedDocId) return window.alert(\"No se encontró el ID del documento.\");\r\n                                try {\r\n                                  const valorGestion = rowRecaudada === \"Sí\" ? \"sí\" : gestionText;\r\n                                  await updateDoc(doc(db, \"cartera\", selectedDocId), {\r\n                                    recaudada: rowRecaudada,\r\n                                    gestion: valorGestion,\r\n                                  });\r\n                                  await cargarDatos();\r\n                                  setOpenRowId(null);\r\n                                  setAlerta({ tipo: \"ok\", mensaje: \"Gestión guardada correctamente\" });\r\n                                  setTimeout(() => setAlerta({ tipo: \"\", mensaje: \"\" }), 2500);\r\n                                } catch (e) {\r\n                                  console.error(\"Error al guardar gestión:\", e);\r\n                                  setAlerta({ tipo: \"error\", mensaje: \"Hubo un error al guardar la gestión.\" });\r\n                                  setTimeout(() => setAlerta({ tipo: \"\", mensaje: \"\" }), 3000);\r\n                                }\r\n                              }}\r\n                            >\r\n                              Guardar Gestión\r\n                            </button>\r\n\r\n                            <button className=\"bg-white border px-2 py-1 rounded hover:bg-gray-100\" onClick={() => setOpenRowId(null)}>\r\n                              Cancelar\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </Fragment>\r\n              ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VerCartera;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}