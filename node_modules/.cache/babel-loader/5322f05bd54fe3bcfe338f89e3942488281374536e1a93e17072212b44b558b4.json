{"ast":null,"code":"import _objectSpread from\"C:/Users/HUAWEI/carpeta limpia para cargar/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from\"react\";import{collection,getDocs,doc,updateDoc,query,orderBy}from\"firebase/firestore\";import{db}from\"./firebase\";import*as XLSX from\"xlsx\";import SubirPolizas from\"./SubirPolizas\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function VerPolizas(){const[cargando,setCargando]=useState(true);const[polizas,setPolizas]=useState([]);const[busqueda,setBusqueda]=useState(\"\");const[aseguradoraSel,setAseguradoraSel]=useState(\"TODAS\");const[filtroRapido,setFiltroRapido]=useState(\"TODOS\");const[edit,setEdit]=useState({});const[guardandoId,setGuardandoId]=useState(null);// =========================\n// Helpers texto / números\n// =========================\nconst norm=v=>String(v!==null&&v!==void 0?v:\"\").toLowerCase().normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g,\"\").trim();const pad2=n=>String(n).padStart(2,\"0\");const parseNumber=v=>{if(v===null||v===undefined||v===\"\")return 0;if(typeof v===\"number\")return isFinite(v)?v:0;const s=String(v).replace(/\\./g,\"\").replace(\",\",\".\").trim();const n=parseFloat(s);return isFinite(n)?n:0;};const money=v=>{const n=parseNumber(v);try{return n.toLocaleString(\"es-CO\");}catch(_unused){return String(n);}};const toSI=v=>{if(typeof v===\"boolean\")return v?\"SI\":\"NO\";const s=norm(v).toUpperCase();if(s===\"SI\"||s===\"SÍ\"||s===\"TRUE\"||s===\"1\")return\"SI\";if(s===\"NO\"||s===\"FALSE\"||s===\"0\")return\"NO\";return\"NO\";};const isAnulada=p=>toSI(p.anulada)===\"SI\";// =========================\n// Helpers fechas\n// =========================\nconst toDateSafe=value=>{if(value===null||value===undefined||value===\"\")return null;// Firestore Timestamp\nif(value&&value.toDate&&typeof value.toDate===\"function\"){const d=value.toDate();return isNaN(d.getTime())?null:d;}// Date\nif(value instanceof Date){return isNaN(value.getTime())?null:value;}// Excel serial\nif(typeof value===\"number\"&&isFinite(value)){const excelEpoch=new Date(Date.UTC(1899,11,30));const d=new Date(excelEpoch.getTime()+value*86400000);return isNaN(d.getTime())?null:d;}// String\nif(typeof value===\"string\"){const s=value.trim();if(!s)return null;// YYYY-MM-DD\nif(/^\\d{4}-\\d{2}-\\d{2}$/.test(s)){const d=new Date(s+\"T00:00:00\");return isNaN(d.getTime())?null:d;}// YYYY/MM/DD\nif(/^\\d{4}\\/\\d{2}\\/\\d{2}$/.test(s)){const parts=s.split(\"/\");const y=parseInt(parts[0],10);const m=parseInt(parts[1],10);const da=parseInt(parts[2],10);const dt=new Date(y,m-1,da);return isNaN(dt.getTime())?null:dt;}// DD/MM/YYYY\nif(/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(s)){const parts=s.split(\"/\");const da=parseInt(parts[0],10);const m=parseInt(parts[1],10);const y=parseInt(parts[2],10);const dt=new Date(y,m-1,da);return isNaN(dt.getTime())?null:dt;}const dt=new Date(s);return isNaN(dt.getTime())?null:dt;}return null;};const formatYMD=value=>{const d=toDateSafe(value);if(!d)return\"\";const y=String(d.getFullYear());const m=pad2(d.getMonth()+1);const da=pad2(d.getDate());return y+\"-\"+m+\"-\"+da;};const daysTo=value=>{const d=toDateSafe(value);if(!d)return null;const today=new Date();today.setHours(0,0,0,0);const target=new Date(d.getFullYear(),d.getMonth(),d.getDate());const diff=target.getTime()-today.getTime();return Math.round(diff/86400000);};// =========================\n// Estado / Semáforo\n// =========================\nconst estadoPorFecha=p=>{if(isAnulada(p))return\"ANULADA\";const d=daysTo(p.fecha_fin);if(d===null)return\"SIN_FECHA\";if(d<0)return\"VENCIDA\";if(d<=30)return\"PROXIMA\";return\"VIGENTE\";};const rowClass=p=>{const e=estadoPorFecha(p);if(e===\"ANULADA\")return\"bg-gray-100 text-gray-600\";if(e===\"VENCIDA\")return\"bg-red-100\";if(e===\"PROXIMA\")return\"bg-yellow-100\";if(e===\"VIGENTE\")return\"bg-green-100\";return\"bg-white\";};// =========================\n// Firestore: cargar\n// =========================\nconst cargar=async()=>{setCargando(true);try{const q=query(collection(db,\"polizas\"),orderBy(\"aseguradora\",\"asc\"));const snap=await getDocs(q);const arr=snap.docs.map(d=>_objectSpread({id:d.id},d.data()));setPolizas(arr);}catch(e){console.error(\"Error cargando pólizas:\",e);alert(\"Error cargando pólizas. Revisa consola (F12).\");}finally{setCargando(false);}};useEffect(()=>{cargar();},[]);// =========================\n// Catálogo aseguradoras\n// =========================\nconst aseguradoras=useMemo(()=>{const set=new Set();polizas.forEach(p=>{const a=String(p.aseguradora||\"\").trim();if(a)set.add(a);});return[\"TODAS\"].concat(Array.from(set).sort());},[polizas]);// =========================\n// Buscador + filtros\n// =========================\nconst polizasFiltradas=useMemo(()=>{let lista=[...polizas];// Filtro select aseguradora\nif(aseguradoraSel&&aseguradoraSel!==\"TODAS\"){lista=lista.filter(p=>norm(p.aseguradora)===norm(aseguradoraSel));}// Buscador (aseguradora, poliza, placa, tomador, id_tomador, asegurado, id_asegurado)\nif(busqueda){const q=norm(busqueda);lista=lista.filter(p=>{const texto=[p.aseguradora,p.poliza,p.placa,p.tomador,p.id_tomador,p.asegurado,p.id_asegurado].map(norm).join(\" \");return texto.includes(q);});}// Filtros rápidos\nlista=lista.filter(p=>{const est=estadoPorFecha(p);if(filtroRapido===\"TODOS\")return true;if(filtroRapido===\"VIGENTES\")return est===\"VIGENTE\";if(filtroRapido===\"PROXIMOS\")return est===\"PROXIMA\";if(filtroRapido===\"VENCIDAS\")return est===\"VENCIDA\";if(filtroRapido===\"ANULADAS\")return est===\"ANULADA\";if(filtroRapido===\"RENOV_SI\")return toSI(p.renovacion)===\"SI\";if(filtroRapido===\"RENOV_NO\")return toSI(p.renovacion)===\"NO\";return true;});return lista;},[polizas,busqueda,aseguradoraSel,filtroRapido]);// =========================\n// Contadores (sobre TODO el dataset)\n// =========================\nconst contadores=useMemo(()=>{let vig=0,pro=0,ven=0,anu=0;polizas.forEach(p=>{const e=estadoPorFecha(p);if(e===\"VIGENTE\")vig++;else if(e===\"PROXIMA\")pro++;else if(e===\"VENCIDA\")ven++;else if(e===\"ANULADA\")anu++;});return{vig,pro,ven,anu,total:polizas.length};},[polizas]);// =========================\n// Resumen por aseguradora (sobre lo FILTRADO)\n// =========================\nconst resumenAseguradora=useMemo(()=>{const map={};// { aseguradora: { ... } }\npolizasFiltradas.forEach(p=>{const a=String(p.aseguradora||\"SIN_ASEGURADORA\").trim()||\"SIN_ASEGURADORA\";if(!map[a]){map[a]={aseguradora:a,total_polizas:0,vigentes:0,proximas:0,vencidas:0,anuladas:0,suma_prima:0,suma_total:0};}const est=estadoPorFecha(p);map[a].total_polizas+=1;if(est===\"VIGENTE\")map[a].vigentes+=1;else if(est===\"PROXIMA\")map[a].proximas+=1;else if(est===\"VENCIDA\")map[a].vencidas+=1;else if(est===\"ANULADA\")map[a].anuladas+=1;map[a].suma_prima+=parseNumber(p.prima);map[a].suma_total+=parseNumber(p.total);});const arr=Object.values(map);arr.sort((x,y)=>y.total_polizas-x.total_polizas);return arr;},[polizasFiltradas]);// =========================\n// Edit / Guardar\n// =========================\nconst getEditValue=(id,field,fallback)=>{if(edit[id]&&Object.prototype.hasOwnProperty.call(edit[id],field)){return edit[id][field];}return fallback;};const setEditValue=(id,field,value)=>{setEdit(prev=>{const copy=_objectSpread({},prev);copy[id]=_objectSpread(_objectSpread({},copy[id]||{}),{},{[field]:value});return copy;});};const guardarFila=async p=>{try{setGuardandoId(p.id);const payload={renovacion:toSI(getEditValue(p.id,\"renovacion\",toSI(p.renovacion))),anulada:toSI(getEditValue(p.id,\"anulada\",toSI(p.anulada))),gestion:String(getEditValue(p.id,\"gestion\",p.gestion||\"\")),telefono:String(getEditValue(p.id,\"telefono\",p.telefono||\"\")),comision:parseNumber(getEditValue(p.id,\"comision\",p.comision||0))};await updateDoc(doc(db,\"polizas\",p.id),payload);setPolizas(prev=>prev.map(x=>x.id===p.id?_objectSpread(_objectSpread({},x),payload):x));setEdit(prev=>{const copy=_objectSpread({},prev);delete copy[p.id];return copy;});}catch(e){console.error(\"Error guardando:\",e);alert(\"No se pudo guardar. Revisa consola (F12).\");}finally{setGuardandoId(null);}};// =========================\n// Exportar a Excel (filtrado)\n// =========================\nconst exportarPolizas=()=>{try{const rows=polizasFiltradas.map(p=>{return{Aseguradora:p.aseguradora||\"\",Poliza:p.poliza||\"\",Ramo:p.ramo||\"\",Placa:p.placa||\"\",Asegurado:p.asegurado||\"\",IdAsegurado:p.id_asegurado||\"\",Beneficiario:p.beneficiario||\"\",IdBeneficiario:p.id_beneficiario||\"\",Tomador:p.tomador||\"\",IdTomador:p.id_tomador||\"\",FechaExpedicion:formatYMD(p.fecha_expedicion),FechaInicio:formatYMD(p.fecha_inicio),FechaFin:formatYMD(p.fecha_fin),Prima:parseNumber(p.prima),GastosExpedicion:parseNumber(p.gastos_expedicion),Iva:parseNumber(p.iva),Total:parseNumber(p.total),Asesor:p.asesor||\"\",Renovacion:toSI(p.renovacion),Comision:parseNumber(p.comision),Telefono:p.telefono||\"\",Anulada:toSI(p.anulada),Gestion:p.gestion||\"\",Estado:estadoPorFecha(p)};});const ws=XLSX.utils.json_to_sheet(rows);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"Polizas\");const nombre=\"polizas_filtradas.xlsx\";XLSX.writeFile(wb,nombre);}catch(e){console.error(e);alert(\"No se pudo exportar. Revisa consola (F12).\");}};const exportarResumen=()=>{try{const rows=resumenAseguradora.map(r=>{return{Aseguradora:r.aseguradora,TotalPolizas:r.total_polizas,Vigentes:r.vigentes,Proximas:r.proximas,Vencidas:r.vencidas,Anuladas:r.anuladas,SumaPrima:r.suma_prima,SumaTotal:r.suma_total};});const ws=XLSX.utils.json_to_sheet(rows);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"Resumen\");const nombre=\"resumen_por_aseguradora.xlsx\";XLSX.writeFile(wb,nombre);}catch(e){console.error(e);alert(\"No se pudo exportar resumen. Revisa consola (F12).\");}};// =========================\n// UI\n// =========================\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border rounded shadow-sm p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-800\",children:\"Gesti\\xF3n de P\\xF3lizas\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Sem\\xE1foro por Fecha fin (verde/amarillo/rojo) y anuladas en gris.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded bg-green-100\",children:[\"Vigentes: \",contadores.vig]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded bg-yellow-100\",children:[\"Pr\\xF3ximas: \",contadores.pro]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded bg-red-100\",children:[\"Vencidas: \",contadores.ven]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded bg-gray-100\",children:[\"Anuladas: \",contadores.anu]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded bg-blue-50\",children:[\"Total: \",contadores.total]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-[520px]\",children:/*#__PURE__*/_jsx(SubirPolizas,{onDone:cargar})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:exportarPolizas,className:\"px-3 py-2 rounded text-sm border bg-white hover:bg-gray-50\",children:\"Exportar p\\xF3lizas (filtrado)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportarResumen,className:\"px-3 py-2 rounded text-sm border bg-white hover:bg-gray-50\",children:\"Exportar resumen aseguradoras\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cargar,className:\"px-3 py-2 rounded text-sm border bg-white hover:bg-gray-50\",children:cargando?\"Cargando...\":\"Recargar\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-2 sm:items-center\",children:[/*#__PURE__*/_jsx(\"select\",{value:aseguradoraSel,onChange:e=>setAseguradoraSel(e.target.value),className:\"border rounded px-2 py-2 text-sm bg-white\",children:aseguradoras.map(a=>/*#__PURE__*/_jsx(\"option\",{value:a,children:a},a))}),/*#__PURE__*/_jsx(\"input\",{value:busqueda,onChange:e=>setBusqueda(e.target.value),placeholder:\"Buscar por aseguradora, p\\xF3liza, placa, tomador, ID tomador, asegurado, ID asegurado...\",className:\"border rounded px-3 py-2 text-sm w-full sm:w-[520px]\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(BtnFiltro,{activo:filtroRapido===\"TODOS\",onClick:()=>setFiltroRapido(\"TODOS\"),label:\"Todos\"}),/*#__PURE__*/_jsx(BtnFiltro,{activo:filtroRapido===\"VIGENTES\",onClick:()=>setFiltroRapido(\"VIGENTES\"),label:\"Vigentes\"}),/*#__PURE__*/_jsx(BtnFiltro,{activo:filtroRapido===\"PROXIMOS\",onClick:()=>setFiltroRapido(\"PROXIMOS\"),label:\"Pr\\xF3ximos\"}),/*#__PURE__*/_jsx(BtnFiltro,{activo:filtroRapido===\"VENCIDAS\",onClick:()=>setFiltroRapido(\"VENCIDAS\"),label:\"Vencidas\"}),/*#__PURE__*/_jsx(BtnFiltro,{activo:filtroRapido===\"ANULADAS\",onClick:()=>setFiltroRapido(\"ANULADAS\"),label:\"Anuladas\"}),/*#__PURE__*/_jsx(BtnFiltro,{activo:filtroRapido===\"RENOV_SI\",onClick:()=>setFiltroRapido(\"RENOV_SI\"),label:\"Renovaci\\xF3n SI\"}),/*#__PURE__*/_jsx(BtnFiltro,{activo:filtroRapido===\"RENOV_NO\",onClick:()=>setFiltroRapido(\"RENOV_NO\"),label:\"Renovaci\\xF3n NO\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 border rounded bg-white overflow-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-sm font-semibold text-gray-800\",children:\"Resumen por aseguradora (seg\\xFAn lo filtrado)\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-[900px] w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 text-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(Th,{children:\"Aseguradora\"}),/*#__PURE__*/_jsx(Th,{children:\"Total\"}),/*#__PURE__*/_jsx(Th,{children:\"Vigentes\"}),/*#__PURE__*/_jsx(Th,{children:\"Pr\\xF3ximas\"}),/*#__PURE__*/_jsx(Th,{children:\"Vencidas\"}),/*#__PURE__*/_jsx(Th,{children:\"Anuladas\"}),/*#__PURE__*/_jsx(Th,{className:\"text-right\",children:\"Suma Prima\"}),/*#__PURE__*/_jsx(Th,{className:\"text-right\",children:\"Suma Total\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:resumenAseguradora.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-500\",colSpan:8,children:\"No hay datos para resumen con estos filtros.\"})}):resumenAseguradora.map(r=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t\",children:[/*#__PURE__*/_jsx(Td,{children:r.aseguradora}),/*#__PURE__*/_jsx(Td,{children:r.total_polizas}),/*#__PURE__*/_jsx(Td,{children:r.vigentes}),/*#__PURE__*/_jsx(Td,{children:r.proximas}),/*#__PURE__*/_jsx(Td,{children:r.vencidas}),/*#__PURE__*/_jsx(Td,{children:r.anuladas}),/*#__PURE__*/_jsx(Td,{className:\"text-right\",children:money(r.suma_prima)}),/*#__PURE__*/_jsx(Td,{className:\"text-right font-semibold\",children:money(r.suma_total)})]},r.aseguradora))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 border rounded overflow-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-[2200px] w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 text-gray-700 sticky top-0\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(Th,{children:\"Aseguradora\"}),/*#__PURE__*/_jsx(Th,{children:\"P\\xF3liza\"}),/*#__PURE__*/_jsx(Th,{children:\"Ramo\"}),/*#__PURE__*/_jsx(Th,{children:\"Placa\"}),/*#__PURE__*/_jsx(Th,{children:\"Asegurado\"}),/*#__PURE__*/_jsx(Th,{children:\"ID asegurado\"}),/*#__PURE__*/_jsx(Th,{children:\"Beneficiario\"}),/*#__PURE__*/_jsx(Th,{children:\"ID beneficiario\"}),/*#__PURE__*/_jsx(Th,{children:\"Tomador\"}),/*#__PURE__*/_jsx(Th,{children:\"ID tomador\"}),/*#__PURE__*/_jsx(Th,{children:\"Fecha expedici\\xF3n\"}),/*#__PURE__*/_jsx(Th,{children:\"Fecha inicio\"}),/*#__PURE__*/_jsx(Th,{children:\"Fecha fin\"}),/*#__PURE__*/_jsx(Th,{className:\"text-right\",children:\"Prima\"}),/*#__PURE__*/_jsx(Th,{className:\"text-right\",children:\"Gastos exp.\"}),/*#__PURE__*/_jsx(Th,{className:\"text-right\",children:\"IVA\"}),/*#__PURE__*/_jsx(Th,{className:\"text-right\",children:\"Total\"}),/*#__PURE__*/_jsx(Th,{children:\"Asesor\"}),/*#__PURE__*/_jsx(Th,{children:\"Renovaci\\xF3n\"}),/*#__PURE__*/_jsx(Th,{children:\"Comisi\\xF3n\"}),/*#__PURE__*/_jsx(Th,{children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(Th,{children:\"Anulada\"}),/*#__PURE__*/_jsx(Th,{children:\"Gesti\\xF3n\"}),/*#__PURE__*/_jsx(Th,{children:\"Acci\\xF3n\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:polizasFiltradas.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"p-4 text-gray-500\",colSpan:24,children:\"No hay resultados con esos filtros.\"})}):polizasFiltradas.map(p=>{const dias=daysTo(p.fecha_fin);const textoDias=dias===null?\"\":dias<0?\"Vencida hace \"+String(Math.abs(dias))+\" días\":\"Faltan \"+String(dias)+\" días\";return/*#__PURE__*/_jsxs(\"tr\",{className:rowClass(p)+\" border-t\",children:[/*#__PURE__*/_jsx(Td,{children:p.aseguradora||\"\"}),/*#__PURE__*/_jsx(Td,{className:\"font-medium\",children:p.poliza||\"\"}),/*#__PURE__*/_jsx(Td,{children:p.ramo||\"\"}),/*#__PURE__*/_jsx(Td,{children:p.placa||\"\"}),/*#__PURE__*/_jsx(Td,{children:p.asegurado||\"\"}),/*#__PURE__*/_jsx(Td,{children:p.id_asegurado||\"\"}),/*#__PURE__*/_jsx(Td,{children:p.beneficiario||\"\"}),/*#__PURE__*/_jsx(Td,{children:p.id_beneficiario||\"\"}),/*#__PURE__*/_jsx(Td,{children:p.tomador||\"\"}),/*#__PURE__*/_jsx(Td,{children:p.id_tomador||\"\"}),/*#__PURE__*/_jsx(Td,{children:formatYMD(p.fecha_expedicion)}),/*#__PURE__*/_jsx(Td,{children:formatYMD(p.fecha_inicio)}),/*#__PURE__*/_jsxs(Td,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:formatYMD(p.fecha_fin)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[11px] text-gray-600\",children:textoDias})]}),/*#__PURE__*/_jsx(Td,{className:\"text-right\",children:money(p.prima)}),/*#__PURE__*/_jsx(Td,{className:\"text-right\",children:money(p.gastos_expedicion)}),/*#__PURE__*/_jsx(Td,{className:\"text-right\",children:money(p.iva)}),/*#__PURE__*/_jsx(Td,{className:\"text-right font-semibold\",children:money(p.total)}),/*#__PURE__*/_jsx(Td,{children:p.asesor||\"\"}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsxs(\"select\",{value:getEditValue(p.id,\"renovacion\",toSI(p.renovacion)),onChange:e=>setEditValue(p.id,\"renovacion\",e.target.value),className:\"border rounded px-2 py-1 bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"SI\",children:\"SI\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NO\",children:\"NO\"})]})}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(\"input\",{value:getEditValue(p.id,\"comision\",p.comision||\"\"),onChange:e=>setEditValue(p.id,\"comision\",e.target.value),className:\"border rounded px-2 py-1 w-28 bg-white\",placeholder:\"0\"})}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(\"input\",{value:getEditValue(p.id,\"telefono\",p.telefono||\"\"),onChange:e=>setEditValue(p.id,\"telefono\",e.target.value),className:\"border rounded px-2 py-1 w-40 bg-white\",placeholder:\"Tel\\xE9fono\"})}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsxs(\"select\",{value:getEditValue(p.id,\"anulada\",toSI(p.anulada)),onChange:e=>setEditValue(p.id,\"anulada\",e.target.value),className:\"border rounded px-2 py-1 bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"NO\",children:\"NO\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SI\",children:\"SI\"})]})}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(\"input\",{value:getEditValue(p.id,\"gestion\",p.gestion||\"\"),onChange:e=>setEditValue(p.id,\"gestion\",e.target.value),className:\"border rounded px-2 py-1 w-72 bg-white\",placeholder:\"Escribe gesti\\xF3n...\"})}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>guardarFila(p),disabled:guardandoId===p.id,className:\"px-3 py-1 rounded text-white \"+(guardandoId===p.id?\"bg-gray-400\":\"bg-blue-600 hover:bg-blue-700\"),children:guardandoId===p.id?\"Guardando...\":\"Guardar\"})})]},p.id);})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 text-xs text-gray-500\",children:\"Nota: exporta exactamente lo que tengas filtrado (buscador + aseguradora + filtros r\\xE1pidos).\"})]})})});}// =========================\n// UI helpers\n// =========================\nfunction Th(_ref){let{children,className=\"\"}=_ref;return/*#__PURE__*/_jsx(\"th\",{className:\"p-2 text-left whitespace-nowrap \"+className,children:children});}function Td(_ref2){let{children,className=\"\"}=_ref2;return/*#__PURE__*/_jsx(\"td\",{className:\"p-2 whitespace-nowrap \"+className,children:children});}function BtnFiltro(_ref3){let{activo,onClick,label}=_ref3;return/*#__PURE__*/_jsx(\"button\",{onClick:onClick,className:\"px-3 py-2 rounded text-sm border \"+(activo?\"bg-gray-900 text-white border-gray-900\":\"bg-white hover:bg-gray-50\"),children:label});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","collection","getDocs","doc","updateDoc","query","orderBy","db","XLSX","SubirPolizas","jsx","_jsx","jsxs","_jsxs","VerPolizas","cargando","setCargando","polizas","setPolizas","busqueda","setBusqueda","aseguradoraSel","setAseguradoraSel","filtroRapido","setFiltroRapido","edit","setEdit","guardandoId","setGuardandoId","norm","v","String","toLowerCase","normalize","replace","trim","pad2","n","padStart","parseNumber","undefined","isFinite","s","parseFloat","money","toLocaleString","_unused","toSI","toUpperCase","isAnulada","p","anulada","toDateSafe","value","toDate","d","isNaN","getTime","Date","excelEpoch","UTC","test","parts","split","y","parseInt","m","da","dt","formatYMD","getFullYear","getMonth","getDate","daysTo","today","setHours","target","diff","Math","round","estadoPorFecha","fecha_fin","rowClass","e","cargar","q","snap","arr","docs","map","_objectSpread","id","data","console","error","alert","aseguradoras","set","Set","forEach","a","aseguradora","add","concat","Array","from","sort","polizasFiltradas","lista","filter","texto","poliza","placa","tomador","id_tomador","asegurado","id_asegurado","join","includes","est","renovacion","contadores","vig","pro","ven","anu","total","length","resumenAseguradora","total_polizas","vigentes","proximas","vencidas","anuladas","suma_prima","suma_total","prima","Object","values","x","getEditValue","field","fallback","prototype","hasOwnProperty","call","setEditValue","prev","copy","guardarFila","payload","gestion","telefono","comision","exportarPolizas","rows","Aseguradora","Poliza","Ramo","ramo","Placa","Asegurado","IdAsegurado","Beneficiario","beneficiario","IdBeneficiario","id_beneficiario","Tomador","IdTomador","FechaExpedicion","fecha_expedicion","FechaInicio","fecha_inicio","FechaFin","Prima","GastosExpedicion","gastos_expedicion","Iva","iva","Total","Asesor","asesor","Renovacion","Comision","Telefono","Anulada","Gestion","Estado","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","nombre","writeFile","exportarResumen","r","TotalPolizas","Vigentes","Proximas","Vencidas","Anuladas","SumaPrima","SumaTotal","className","children","onDone","onClick","onChange","placeholder","BtnFiltro","activo","label","Th","colSpan","Td","dias","textoDias","abs","disabled","_ref","_ref2","_ref3"],"sources":["C:/Users/HUAWEI/carpeta limpia para cargar/src/VerPolizas.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { collection, getDocs, doc, updateDoc, query, orderBy } from \"firebase/firestore\";\r\nimport { db } from \"./firebase\";\r\nimport * as XLSX from \"xlsx\";\r\nimport SubirPolizas from \"./SubirPolizas\";\r\n\r\nexport default function VerPolizas() {\r\n  const [cargando, setCargando] = useState(true);\r\n  const [polizas, setPolizas] = useState([]);\r\n\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [aseguradoraSel, setAseguradoraSel] = useState(\"TODAS\");\r\n  const [filtroRapido, setFiltroRapido] = useState(\"TODOS\");\r\n\r\n  const [edit, setEdit] = useState({});\r\n  const [guardandoId, setGuardandoId] = useState(null);\r\n\r\n  // =========================\r\n  // Helpers texto / números\r\n  // =========================\r\n  const norm = (v) =>\r\n    String(v ?? \"\")\r\n      .toLowerCase()\r\n      .normalize(\"NFD\")\r\n      .replace(/[\\u0300-\\u036f]/g, \"\")\r\n      .trim();\r\n\r\n  const pad2 = (n) => String(n).padStart(2, \"0\");\r\n\r\n  const parseNumber = (v) => {\r\n    if (v === null || v === undefined || v === \"\") return 0;\r\n    if (typeof v === \"number\") return isFinite(v) ? v : 0;\r\n    const s = String(v).replace(/\\./g, \"\").replace(\",\", \".\").trim();\r\n    const n = parseFloat(s);\r\n    return isFinite(n) ? n : 0;\r\n  };\r\n\r\n  const money = (v) => {\r\n    const n = parseNumber(v);\r\n    try {\r\n      return n.toLocaleString(\"es-CO\");\r\n    } catch {\r\n      return String(n);\r\n    }\r\n  };\r\n\r\n  const toSI = (v) => {\r\n    if (typeof v === \"boolean\") return v ? \"SI\" : \"NO\";\r\n    const s = norm(v).toUpperCase();\r\n    if (s === \"SI\" || s === \"SÍ\" || s === \"TRUE\" || s === \"1\") return \"SI\";\r\n    if (s === \"NO\" || s === \"FALSE\" || s === \"0\") return \"NO\";\r\n    return \"NO\";\r\n  };\r\n\r\n  const isAnulada = (p) => toSI(p.anulada) === \"SI\";\r\n\r\n  // =========================\r\n  // Helpers fechas\r\n  // =========================\r\n  const toDateSafe = (value) => {\r\n    if (value === null || value === undefined || value === \"\") return null;\r\n\r\n    // Firestore Timestamp\r\n    if (value && value.toDate && typeof value.toDate === \"function\") {\r\n      const d = value.toDate();\r\n      return isNaN(d.getTime()) ? null : d;\r\n    }\r\n\r\n    // Date\r\n    if (value instanceof Date) {\r\n      return isNaN(value.getTime()) ? null : value;\r\n    }\r\n\r\n    // Excel serial\r\n    if (typeof value === \"number\" && isFinite(value)) {\r\n      const excelEpoch = new Date(Date.UTC(1899, 11, 30));\r\n      const d = new Date(excelEpoch.getTime() + value * 86400000);\r\n      return isNaN(d.getTime()) ? null : d;\r\n    }\r\n\r\n    // String\r\n    if (typeof value === \"string\") {\r\n      const s = value.trim();\r\n      if (!s) return null;\r\n\r\n      // YYYY-MM-DD\r\n      if (/^\\d{4}-\\d{2}-\\d{2}$/.test(s)) {\r\n        const d = new Date(s + \"T00:00:00\");\r\n        return isNaN(d.getTime()) ? null : d;\r\n      }\r\n\r\n      // YYYY/MM/DD\r\n      if (/^\\d{4}\\/\\d{2}\\/\\d{2}$/.test(s)) {\r\n        const parts = s.split(\"/\");\r\n        const y = parseInt(parts[0], 10);\r\n        const m = parseInt(parts[1], 10);\r\n        const da = parseInt(parts[2], 10);\r\n        const dt = new Date(y, m - 1, da);\r\n        return isNaN(dt.getTime()) ? null : dt;\r\n      }\r\n\r\n      // DD/MM/YYYY\r\n      if (/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(s)) {\r\n        const parts = s.split(\"/\");\r\n        const da = parseInt(parts[0], 10);\r\n        const m = parseInt(parts[1], 10);\r\n        const y = parseInt(parts[2], 10);\r\n        const dt = new Date(y, m - 1, da);\r\n        return isNaN(dt.getTime()) ? null : dt;\r\n      }\r\n\r\n      const dt = new Date(s);\r\n      return isNaN(dt.getTime()) ? null : dt;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const formatYMD = (value) => {\r\n    const d = toDateSafe(value);\r\n    if (!d) return \"\";\r\n    const y = String(d.getFullYear());\r\n    const m = pad2(d.getMonth() + 1);\r\n    const da = pad2(d.getDate());\r\n    return y + \"-\" + m + \"-\" + da;\r\n  };\r\n\r\n  const daysTo = (value) => {\r\n    const d = toDateSafe(value);\r\n    if (!d) return null;\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const target = new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n    const diff = target.getTime() - today.getTime();\r\n    return Math.round(diff / 86400000);\r\n  };\r\n\r\n  // =========================\r\n  // Estado / Semáforo\r\n  // =========================\r\n  const estadoPorFecha = (p) => {\r\n    if (isAnulada(p)) return \"ANULADA\";\r\n    const d = daysTo(p.fecha_fin);\r\n    if (d === null) return \"SIN_FECHA\";\r\n    if (d < 0) return \"VENCIDA\";\r\n    if (d <= 30) return \"PROXIMA\";\r\n    return \"VIGENTE\";\r\n  };\r\n\r\n  const rowClass = (p) => {\r\n    const e = estadoPorFecha(p);\r\n    if (e === \"ANULADA\") return \"bg-gray-100 text-gray-600\";\r\n    if (e === \"VENCIDA\") return \"bg-red-100\";\r\n    if (e === \"PROXIMA\") return \"bg-yellow-100\";\r\n    if (e === \"VIGENTE\") return \"bg-green-100\";\r\n    return \"bg-white\";\r\n  };\r\n\r\n  // =========================\r\n  // Firestore: cargar\r\n  // =========================\r\n  const cargar = async () => {\r\n    setCargando(true);\r\n    try {\r\n      const q = query(collection(db, \"polizas\"), orderBy(\"aseguradora\", \"asc\"));\r\n      const snap = await getDocs(q);\r\n      const arr = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n      setPolizas(arr);\r\n    } catch (e) {\r\n      console.error(\"Error cargando pólizas:\", e);\r\n      alert(\"Error cargando pólizas. Revisa consola (F12).\");\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    cargar();\r\n  }, []);\r\n\r\n  // =========================\r\n  // Catálogo aseguradoras\r\n  // =========================\r\n  const aseguradoras = useMemo(() => {\r\n    const set = new Set();\r\n    polizas.forEach((p) => {\r\n      const a = String(p.aseguradora || \"\").trim();\r\n      if (a) set.add(a);\r\n    });\r\n    return [\"TODAS\"].concat(Array.from(set).sort());\r\n  }, [polizas]);\r\n\r\n  // =========================\r\n  // Buscador + filtros\r\n  // =========================\r\n  const polizasFiltradas = useMemo(() => {\r\n    let lista = [...polizas];\r\n\r\n    // Filtro select aseguradora\r\n    if (aseguradoraSel && aseguradoraSel !== \"TODAS\") {\r\n      lista = lista.filter((p) => norm(p.aseguradora) === norm(aseguradoraSel));\r\n    }\r\n\r\n    // Buscador (aseguradora, poliza, placa, tomador, id_tomador, asegurado, id_asegurado)\r\n    if (busqueda) {\r\n      const q = norm(busqueda);\r\n      lista = lista.filter((p) => {\r\n        const texto = [\r\n          p.aseguradora,\r\n          p.poliza,\r\n          p.placa,\r\n          p.tomador,\r\n          p.id_tomador,\r\n          p.asegurado,\r\n          p.id_asegurado,\r\n        ]\r\n          .map(norm)\r\n          .join(\" \");\r\n        return texto.includes(q);\r\n      });\r\n    }\r\n\r\n    // Filtros rápidos\r\n    lista = lista.filter((p) => {\r\n      const est = estadoPorFecha(p);\r\n      if (filtroRapido === \"TODOS\") return true;\r\n      if (filtroRapido === \"VIGENTES\") return est === \"VIGENTE\";\r\n      if (filtroRapido === \"PROXIMOS\") return est === \"PROXIMA\";\r\n      if (filtroRapido === \"VENCIDAS\") return est === \"VENCIDA\";\r\n      if (filtroRapido === \"ANULADAS\") return est === \"ANULADA\";\r\n      if (filtroRapido === \"RENOV_SI\") return toSI(p.renovacion) === \"SI\";\r\n      if (filtroRapido === \"RENOV_NO\") return toSI(p.renovacion) === \"NO\";\r\n      return true;\r\n    });\r\n\r\n    return lista;\r\n  }, [polizas, busqueda, aseguradoraSel, filtroRapido]);\r\n\r\n  // =========================\r\n  // Contadores (sobre TODO el dataset)\r\n  // =========================\r\n  const contadores = useMemo(() => {\r\n    let vig = 0,\r\n      pro = 0,\r\n      ven = 0,\r\n      anu = 0;\r\n\r\n    polizas.forEach((p) => {\r\n      const e = estadoPorFecha(p);\r\n      if (e === \"VIGENTE\") vig++;\r\n      else if (e === \"PROXIMA\") pro++;\r\n      else if (e === \"VENCIDA\") ven++;\r\n      else if (e === \"ANULADA\") anu++;\r\n    });\r\n\r\n    return { vig, pro, ven, anu, total: polizas.length };\r\n  }, [polizas]);\r\n\r\n  // =========================\r\n  // Resumen por aseguradora (sobre lo FILTRADO)\r\n  // =========================\r\n  const resumenAseguradora = useMemo(() => {\r\n    const map = {}; // { aseguradora: { ... } }\r\n\r\n    polizasFiltradas.forEach((p) => {\r\n      const a = String(p.aseguradora || \"SIN_ASEGURADORA\").trim() || \"SIN_ASEGURADORA\";\r\n      if (!map[a]) {\r\n        map[a] = {\r\n          aseguradora: a,\r\n          total_polizas: 0,\r\n          vigentes: 0,\r\n          proximas: 0,\r\n          vencidas: 0,\r\n          anuladas: 0,\r\n          suma_prima: 0,\r\n          suma_total: 0,\r\n        };\r\n      }\r\n\r\n      const est = estadoPorFecha(p);\r\n\r\n      map[a].total_polizas += 1;\r\n      if (est === \"VIGENTE\") map[a].vigentes += 1;\r\n      else if (est === \"PROXIMA\") map[a].proximas += 1;\r\n      else if (est === \"VENCIDA\") map[a].vencidas += 1;\r\n      else if (est === \"ANULADA\") map[a].anuladas += 1;\r\n\r\n      map[a].suma_prima += parseNumber(p.prima);\r\n      map[a].suma_total += parseNumber(p.total);\r\n    });\r\n\r\n    const arr = Object.values(map);\r\n    arr.sort((x, y) => y.total_polizas - x.total_polizas);\r\n    return arr;\r\n  }, [polizasFiltradas]);\r\n\r\n  // =========================\r\n  // Edit / Guardar\r\n  // =========================\r\n  const getEditValue = (id, field, fallback) => {\r\n    if (edit[id] && Object.prototype.hasOwnProperty.call(edit[id], field)) {\r\n      return edit[id][field];\r\n    }\r\n    return fallback;\r\n  };\r\n\r\n  const setEditValue = (id, field, value) => {\r\n    setEdit((prev) => {\r\n      const copy = { ...prev };\r\n      copy[id] = { ...(copy[id] || {}), [field]: value };\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  const guardarFila = async (p) => {\r\n    try {\r\n      setGuardandoId(p.id);\r\n\r\n      const payload = {\r\n        renovacion: toSI(getEditValue(p.id, \"renovacion\", toSI(p.renovacion))),\r\n        anulada: toSI(getEditValue(p.id, \"anulada\", toSI(p.anulada))),\r\n        gestion: String(getEditValue(p.id, \"gestion\", p.gestion || \"\")),\r\n        telefono: String(getEditValue(p.id, \"telefono\", p.telefono || \"\")),\r\n        comision: parseNumber(getEditValue(p.id, \"comision\", p.comision || 0)),\r\n      };\r\n\r\n      await updateDoc(doc(db, \"polizas\", p.id), payload);\r\n\r\n      setPolizas((prev) => prev.map((x) => (x.id === p.id ? { ...x, ...payload } : x)));\r\n\r\n      setEdit((prev) => {\r\n        const copy = { ...prev };\r\n        delete copy[p.id];\r\n        return copy;\r\n      });\r\n    } catch (e) {\r\n      console.error(\"Error guardando:\", e);\r\n      alert(\"No se pudo guardar. Revisa consola (F12).\");\r\n    } finally {\r\n      setGuardandoId(null);\r\n    }\r\n  };\r\n\r\n  // =========================\r\n  // Exportar a Excel (filtrado)\r\n  // =========================\r\n  const exportarPolizas = () => {\r\n    try {\r\n      const rows = polizasFiltradas.map((p) => {\r\n        return {\r\n          Aseguradora: p.aseguradora || \"\",\r\n          Poliza: p.poliza || \"\",\r\n          Ramo: p.ramo || \"\",\r\n          Placa: p.placa || \"\",\r\n          Asegurado: p.asegurado || \"\",\r\n          IdAsegurado: p.id_asegurado || \"\",\r\n          Beneficiario: p.beneficiario || \"\",\r\n          IdBeneficiario: p.id_beneficiario || \"\",\r\n          Tomador: p.tomador || \"\",\r\n          IdTomador: p.id_tomador || \"\",\r\n          FechaExpedicion: formatYMD(p.fecha_expedicion),\r\n          FechaInicio: formatYMD(p.fecha_inicio),\r\n          FechaFin: formatYMD(p.fecha_fin),\r\n          Prima: parseNumber(p.prima),\r\n          GastosExpedicion: parseNumber(p.gastos_expedicion),\r\n          Iva: parseNumber(p.iva),\r\n          Total: parseNumber(p.total),\r\n          Asesor: p.asesor || \"\",\r\n          Renovacion: toSI(p.renovacion),\r\n          Comision: parseNumber(p.comision),\r\n          Telefono: p.telefono || \"\",\r\n          Anulada: toSI(p.anulada),\r\n          Gestion: p.gestion || \"\",\r\n          Estado: estadoPorFecha(p),\r\n        };\r\n      });\r\n\r\n      const ws = XLSX.utils.json_to_sheet(rows);\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, \"Polizas\");\r\n\r\n      const nombre = \"polizas_filtradas.xlsx\";\r\n      XLSX.writeFile(wb, nombre);\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(\"No se pudo exportar. Revisa consola (F12).\");\r\n    }\r\n  };\r\n\r\n  const exportarResumen = () => {\r\n    try {\r\n      const rows = resumenAseguradora.map((r) => {\r\n        return {\r\n          Aseguradora: r.aseguradora,\r\n          TotalPolizas: r.total_polizas,\r\n          Vigentes: r.vigentes,\r\n          Proximas: r.proximas,\r\n          Vencidas: r.vencidas,\r\n          Anuladas: r.anuladas,\r\n          SumaPrima: r.suma_prima,\r\n          SumaTotal: r.suma_total,\r\n        };\r\n      });\r\n\r\n      const ws = XLSX.utils.json_to_sheet(rows);\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, \"Resumen\");\r\n\r\n      const nombre = \"resumen_por_aseguradora.xlsx\";\r\n      XLSX.writeFile(wb, nombre);\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(\"No se pudo exportar resumen. Revisa consola (F12).\");\r\n    }\r\n  };\r\n\r\n  // =========================\r\n  // UI\r\n  // =========================\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-6\">\r\n        <div className=\"bg-white border rounded shadow-sm p-4\">\r\n          <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n            <div>\r\n              <h2 className=\"text-lg font-semibold text-gray-800\">Gestión de Pólizas</h2>\r\n              <p className=\"text-xs text-gray-500\">\r\n                Semáforo por Fecha fin (verde/amarillo/rojo) y anuladas en gris.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-2 text-xs\">\r\n              <div className=\"px-3 py-1 rounded bg-green-100\">Vigentes: {contadores.vig}</div>\r\n              <div className=\"px-3 py-1 rounded bg-yellow-100\">Próximas: {contadores.pro}</div>\r\n              <div className=\"px-3 py-1 rounded bg-red-100\">Vencidas: {contadores.ven}</div>\r\n              <div className=\"px-3 py-1 rounded bg-gray-100\">Anuladas: {contadores.anu}</div>\r\n              <div className=\"px-3 py-1 rounded bg-blue-50\">Total: {contadores.total}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Subida Excel + Export */}\r\n          <div className=\"mt-4 flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between\">\r\n            <div className=\"w-full lg:w-[520px]\">\r\n              <SubirPolizas onDone={cargar} />\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              <button\r\n                onClick={exportarPolizas}\r\n                className=\"px-3 py-2 rounded text-sm border bg-white hover:bg-gray-50\"\r\n              >\r\n                Exportar pólizas (filtrado)\r\n              </button>\r\n              <button\r\n                onClick={exportarResumen}\r\n                className=\"px-3 py-2 rounded text-sm border bg-white hover:bg-gray-50\"\r\n              >\r\n                Exportar resumen aseguradoras\r\n              </button>\r\n              <button\r\n                onClick={cargar}\r\n                className=\"px-3 py-2 rounded text-sm border bg-white hover:bg-gray-50\"\r\n              >\r\n                {cargando ? \"Cargando...\" : \"Recargar\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filtros */}\r\n          <div className=\"mt-4 flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between\">\r\n            <div className=\"flex flex-col sm:flex-row gap-2 sm:items-center\">\r\n              <select\r\n                value={aseguradoraSel}\r\n                onChange={(e) => setAseguradoraSel(e.target.value)}\r\n                className=\"border rounded px-2 py-2 text-sm bg-white\"\r\n              >\r\n                {aseguradoras.map((a) => (\r\n                  <option key={a} value={a}>\r\n                    {a}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n\r\n              <input\r\n                value={busqueda}\r\n                onChange={(e) => setBusqueda(e.target.value)}\r\n                placeholder=\"Buscar por aseguradora, póliza, placa, tomador, ID tomador, asegurado, ID asegurado...\"\r\n                className=\"border rounded px-3 py-2 text-sm w-full sm:w-[520px]\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              <BtnFiltro activo={filtroRapido === \"TODOS\"} onClick={() => setFiltroRapido(\"TODOS\")} label=\"Todos\" />\r\n              <BtnFiltro activo={filtroRapido === \"VIGENTES\"} onClick={() => setFiltroRapido(\"VIGENTES\")} label=\"Vigentes\" />\r\n              <BtnFiltro activo={filtroRapido === \"PROXIMOS\"} onClick={() => setFiltroRapido(\"PROXIMOS\")} label=\"Próximos\" />\r\n              <BtnFiltro activo={filtroRapido === \"VENCIDAS\"} onClick={() => setFiltroRapido(\"VENCIDAS\")} label=\"Vencidas\" />\r\n              <BtnFiltro activo={filtroRapido === \"ANULADAS\"} onClick={() => setFiltroRapido(\"ANULADAS\")} label=\"Anuladas\" />\r\n              <BtnFiltro activo={filtroRapido === \"RENOV_SI\"} onClick={() => setFiltroRapido(\"RENOV_SI\")} label=\"Renovación SI\" />\r\n              <BtnFiltro activo={filtroRapido === \"RENOV_NO\"} onClick={() => setFiltroRapido(\"RENOV_NO\")} label=\"Renovación NO\" />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Resumen por aseguradora (en pantalla) */}\r\n          <div className=\"mt-4 border rounded bg-white overflow-auto\">\r\n            <div className=\"p-3 text-sm font-semibold text-gray-800\">Resumen por aseguradora (según lo filtrado)</div>\r\n            <table className=\"min-w-[900px] w-full text-sm\">\r\n              <thead className=\"bg-gray-100 text-gray-700\">\r\n                <tr>\r\n                  <Th>Aseguradora</Th>\r\n                  <Th>Total</Th>\r\n                  <Th>Vigentes</Th>\r\n                  <Th>Próximas</Th>\r\n                  <Th>Vencidas</Th>\r\n                  <Th>Anuladas</Th>\r\n                  <Th className=\"text-right\">Suma Prima</Th>\r\n                  <Th className=\"text-right\">Suma Total</Th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {resumenAseguradora.length === 0 ? (\r\n                  <tr>\r\n                    <td className=\"p-3 text-gray-500\" colSpan={8}>No hay datos para resumen con estos filtros.</td>\r\n                  </tr>\r\n                ) : (\r\n                  resumenAseguradora.map((r) => (\r\n                    <tr key={r.aseguradora} className=\"border-t\">\r\n                      <Td>{r.aseguradora}</Td>\r\n                      <Td>{r.total_polizas}</Td>\r\n                      <Td>{r.vigentes}</Td>\r\n                      <Td>{r.proximas}</Td>\r\n                      <Td>{r.vencidas}</Td>\r\n                      <Td>{r.anuladas}</Td>\r\n                      <Td className=\"text-right\">{money(r.suma_prima)}</Td>\r\n                      <Td className=\"text-right font-semibold\">{money(r.suma_total)}</Td>\r\n                    </tr>\r\n                  ))\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {/* Tabla */}\r\n          <div className=\"mt-4 border rounded overflow-auto\">\r\n            <table className=\"min-w-[2200px] w-full text-sm\">\r\n              <thead className=\"bg-gray-100 text-gray-700 sticky top-0\">\r\n                <tr>\r\n                  <Th>Aseguradora</Th>\r\n                  <Th>Póliza</Th>\r\n                  <Th>Ramo</Th>\r\n                  <Th>Placa</Th>\r\n\r\n                  <Th>Asegurado</Th>\r\n                  <Th>ID asegurado</Th>\r\n\r\n                  <Th>Beneficiario</Th>\r\n                  <Th>ID beneficiario</Th>\r\n\r\n                  <Th>Tomador</Th>\r\n                  <Th>ID tomador</Th>\r\n\r\n                  <Th>Fecha expedición</Th>\r\n                  <Th>Fecha inicio</Th>\r\n                  <Th>Fecha fin</Th>\r\n\r\n                  <Th className=\"text-right\">Prima</Th>\r\n                  <Th className=\"text-right\">Gastos exp.</Th>\r\n                  <Th className=\"text-right\">IVA</Th>\r\n                  <Th className=\"text-right\">Total</Th>\r\n\r\n                  <Th>Asesor</Th>\r\n\r\n                  <Th>Renovación</Th>\r\n                  <Th>Comisión</Th>\r\n                  <Th>Teléfono</Th>\r\n                  <Th>Anulada</Th>\r\n\r\n                  <Th>Gestión</Th>\r\n                  <Th>Acción</Th>\r\n                </tr>\r\n              </thead>\r\n\r\n              <tbody>\r\n                {polizasFiltradas.length === 0 ? (\r\n                  <tr>\r\n                    <td className=\"p-4 text-gray-500\" colSpan={24}>\r\n                      No hay resultados con esos filtros.\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  polizasFiltradas.map((p) => {\r\n                    const dias = daysTo(p.fecha_fin);\r\n                    const textoDias =\r\n                      dias === null\r\n                        ? \"\"\r\n                        : dias < 0\r\n                        ? \"Vencida hace \" + String(Math.abs(dias)) + \" días\"\r\n                        : \"Faltan \" + String(dias) + \" días\";\r\n\r\n                    return (\r\n                      <tr key={p.id} className={rowClass(p) + \" border-t\"}>\r\n                        <Td>{p.aseguradora || \"\"}</Td>\r\n                        <Td className=\"font-medium\">{p.poliza || \"\"}</Td>\r\n                        <Td>{p.ramo || \"\"}</Td>\r\n                        <Td>{p.placa || \"\"}</Td>\r\n\r\n                        <Td>{p.asegurado || \"\"}</Td>\r\n                        <Td>{p.id_asegurado || \"\"}</Td>\r\n\r\n                        <Td>{p.beneficiario || \"\"}</Td>\r\n                        <Td>{p.id_beneficiario || \"\"}</Td>\r\n\r\n                        <Td>{p.tomador || \"\"}</Td>\r\n                        <Td>{p.id_tomador || \"\"}</Td>\r\n\r\n                        <Td>{formatYMD(p.fecha_expedicion)}</Td>\r\n                        <Td>{formatYMD(p.fecha_inicio)}</Td>\r\n                        <Td>\r\n                          <div className=\"font-medium\">{formatYMD(p.fecha_fin)}</div>\r\n                          <div className=\"text-[11px] text-gray-600\">{textoDias}</div>\r\n                        </Td>\r\n\r\n                        <Td className=\"text-right\">{money(p.prima)}</Td>\r\n                        <Td className=\"text-right\">{money(p.gastos_expedicion)}</Td>\r\n                        <Td className=\"text-right\">{money(p.iva)}</Td>\r\n                        <Td className=\"text-right font-semibold\">{money(p.total)}</Td>\r\n\r\n                        <Td>{p.asesor || \"\"}</Td>\r\n\r\n                        <Td>\r\n                          <select\r\n                            value={getEditValue(p.id, \"renovacion\", toSI(p.renovacion))}\r\n                            onChange={(e) => setEditValue(p.id, \"renovacion\", e.target.value)}\r\n                            className=\"border rounded px-2 py-1 bg-white\"\r\n                          >\r\n                            <option value=\"SI\">SI</option>\r\n                            <option value=\"NO\">NO</option>\r\n                          </select>\r\n                        </Td>\r\n\r\n                        <Td>\r\n                          <input\r\n                            value={getEditValue(p.id, \"comision\", p.comision || \"\")}\r\n                            onChange={(e) => setEditValue(p.id, \"comision\", e.target.value)}\r\n                            className=\"border rounded px-2 py-1 w-28 bg-white\"\r\n                            placeholder=\"0\"\r\n                          />\r\n                        </Td>\r\n\r\n                        <Td>\r\n                          <input\r\n                            value={getEditValue(p.id, \"telefono\", p.telefono || \"\")}\r\n                            onChange={(e) => setEditValue(p.id, \"telefono\", e.target.value)}\r\n                            className=\"border rounded px-2 py-1 w-40 bg-white\"\r\n                            placeholder=\"Teléfono\"\r\n                          />\r\n                        </Td>\r\n\r\n                        <Td>\r\n                          <select\r\n                            value={getEditValue(p.id, \"anulada\", toSI(p.anulada))}\r\n                            onChange={(e) => setEditValue(p.id, \"anulada\", e.target.value)}\r\n                            className=\"border rounded px-2 py-1 bg-white\"\r\n                          >\r\n                            <option value=\"NO\">NO</option>\r\n                            <option value=\"SI\">SI</option>\r\n                          </select>\r\n                        </Td>\r\n\r\n                        <Td>\r\n                          <input\r\n                            value={getEditValue(p.id, \"gestion\", p.gestion || \"\")}\r\n                            onChange={(e) => setEditValue(p.id, \"gestion\", e.target.value)}\r\n                            className=\"border rounded px-2 py-1 w-72 bg-white\"\r\n                            placeholder=\"Escribe gestión...\"\r\n                          />\r\n                        </Td>\r\n\r\n                        <Td>\r\n                          <button\r\n                            onClick={() => guardarFila(p)}\r\n                            disabled={guardandoId === p.id}\r\n                            className={\r\n                              \"px-3 py-1 rounded text-white \" +\r\n                              (guardandoId === p.id ? \"bg-gray-400\" : \"bg-blue-600 hover:bg-blue-700\")\r\n                            }\r\n                          >\r\n                            {guardandoId === p.id ? \"Guardando...\" : \"Guardar\"}\r\n                          </button>\r\n                        </Td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <div className=\"mt-3 text-xs text-gray-500\">\r\n            Nota: exporta exactamente lo que tengas filtrado (buscador + aseguradora + filtros rápidos).\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// =========================\r\n// UI helpers\r\n// =========================\r\nfunction Th({ children, className = \"\" }) {\r\n  return <th className={\"p-2 text-left whitespace-nowrap \" + className}>{children}</th>;\r\n}\r\n\r\nfunction Td({ children, className = \"\" }) {\r\n  return <td className={\"p-2 whitespace-nowrap \" + className}>{children}</td>;\r\n}\r\n\r\nfunction BtnFiltro({ activo, onClick, label }) {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      className={\r\n        \"px-3 py-2 rounded text-sm border \" +\r\n        (activo ? \"bg-gray-900 text-white border-gray-900\" : \"bg-white hover:bg-gray-50\")\r\n      }\r\n    >\r\n      {label}\r\n    </button>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}